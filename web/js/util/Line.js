"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("../Preconditions");
class Line {
    constructor(start, end, axis) {
        this.start = Preconditions_1.Preconditions.assertNumber(start, "start");
        this.end = Preconditions_1.Preconditions.assertNumber(end, "end");
        this.axis = axis;
    }
    get width() {
        return this.end - this.start;
    }
    get length() {
        return this.end - this.start;
    }
    containsPoint(pt) {
        return this.within(pt);
    }
    within(pt) {
        return this.start <= pt && pt <= this.end;
    }
    overlaps(line) {
        Preconditions_1.Preconditions.assertNotNull(line, "line");
        return this.containsPoint(line.start) || this.containsPoint(line.end);
    }
    toString(fmt) {
        if (fmt === "interval") {
            return `[${this.start},${this.end}]`;
        }
        return `{start: ${this.start}, end: ${this.end}}`;
    }
    multiply(scalar) {
        return new Line(this.start * scalar, this.end * scalar, this.axis);
    }
    floor() {
        return new Line(Math.floor(this.start), Math.floor(this.end), this.axis);
    }
    toJSON() {
        return {
            axis: this.axis,
            start: this.start,
            end: this.end,
            length: this.length
        };
    }
    static interval(start, pt, end) {
        return start <= pt && pt <= end;
    }
    static builder() {
        return new LineBuilder();
    }
}
exports.Line = Line;
class LineBuilder {
    setStart(value) {
        this.start = value;
        return this;
    }
    setEnd(value) {
        this.end = value;
        return this;
    }
    setLength(value) {
        this.length = value;
        return this;
    }
    setAxis(value) {
        this.axis = value;
        return this;
    }
    build() {
        let start = Preconditions_1.notNull(this.start);
        if (!Preconditions_1.isPresent(this.end) && Preconditions_1.isPresent(this.length)) {
            this.end = start + this.length;
        }
        let end = Preconditions_1.notNull(this.end);
        return new Line(start, end);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkxpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxvREFBbUU7QUFNbkUsTUFBYSxJQUFJO0lBWWIsWUFBWSxLQUFhLEVBQUUsR0FBVyxFQUFFLElBQWE7UUFDakQsSUFBSSxDQUFDLEtBQUssR0FBRyw2QkFBYSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLEdBQUcsR0FBRyw2QkFBYSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFFckIsQ0FBQztJQVNELElBQUksS0FBSztRQUNMLE9BQU8sSUFBSSxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxJQUFJLE1BQU07UUFDTixPQUFPLElBQUksQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBU0QsYUFBYSxDQUFDLEVBQVU7UUFDcEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFPRCxNQUFNLENBQUMsRUFBVTtRQUNiLE9BQU8sSUFBSSxDQUFDLEtBQUssSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDOUMsQ0FBQztJQVFELFFBQVEsQ0FBQyxJQUFVO1FBQ2YsNkJBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBSTFDLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQU9ELFFBQVEsQ0FBQyxHQUFXO1FBRWhCLElBQUcsR0FBRyxLQUFLLFVBQVUsRUFBRTtZQUNuQixPQUFPLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7U0FDeEM7UUFFRCxPQUFPLFdBQVcsSUFBSSxDQUFDLEtBQUssVUFBVSxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUM7SUFFdEQsQ0FBQztJQVNELFFBQVEsQ0FBQyxNQUFjO1FBQ25CLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLEVBQUUsSUFBSSxDQUFDLEdBQUcsR0FBRyxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFLRCxLQUFLO1FBQ0QsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0UsQ0FBQztJQUVELE1BQU07UUFFRixPQUFPO1lBQ0gsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO1lBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLO1lBQ2pCLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRztZQUNiLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTTtTQUN0QixDQUFDO0lBRU4sQ0FBQztJQUVELE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBYSxFQUFFLEVBQVUsRUFBRSxHQUFXO1FBQ2xELE9BQU8sS0FBSyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksR0FBRyxDQUFDO0lBQ3BDLENBQUM7SUFFRCxNQUFNLENBQUMsT0FBTztRQUNWLE9BQU8sSUFBSSxXQUFXLEVBQUUsQ0FBQztJQUM3QixDQUFDO0NBRUo7QUF4SEQsb0JBd0hDO0FBRUQsTUFBTSxXQUFXO0lBVWIsUUFBUSxDQUFDLEtBQWE7UUFDbEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELE1BQU0sQ0FBQyxLQUFhO1FBQ2hCLElBQUksQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxTQUFTLENBQUMsS0FBYTtRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsT0FBTyxDQUFDLEtBQWE7UUFDakIsSUFBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7UUFDbEIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELEtBQUs7UUFFRCxJQUFJLEtBQUssR0FBRyx1QkFBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVoQyxJQUFHLENBQUUseUJBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUkseUJBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7WUFDaEQsSUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU8sQ0FBQztTQUNuQztRQUVELElBQUksR0FBRyxHQUFHLHVCQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRTVCLE9BQU8sSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRWhDLENBQUM7Q0FFSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNQcmVzZW50LCBub3ROdWxsLCBQcmVjb25kaXRpb25zfSBmcm9tICcuLi9QcmVjb25kaXRpb25zJztcblxuXG4vKipcbiAqIFNpbXBsZSBsaW5lIHdpdGgganVzdCBhIHN0YXJ0IGFuZCBlbmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaW5lIHtcblxuICAgIHB1YmxpYyByZWFkb25seSBzdGFydDogbnVtYmVyO1xuICAgIHB1YmxpYyByZWFkb25seSBlbmQ6IG51bWJlcjtcbiAgICBwdWJsaWMgcmVhZG9ubHkgYXhpcz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0XG4gICAgICogQHBhcmFtIGVuZFxuICAgICAqIEBwYXJhbSBbYXhpc10gT3B0aW9uYWwgYXhpcyBwYXJhbWV0ZXIgKCd4JyBvciAneScpXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgZW5kOiBudW1iZXIsIGF4aXM/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdGFydCA9IFByZWNvbmRpdGlvbnMuYXNzZXJ0TnVtYmVyKHN0YXJ0LCBcInN0YXJ0XCIpO1xuICAgICAgICB0aGlzLmVuZCA9IFByZWNvbmRpdGlvbnMuYXNzZXJ0TnVtYmVyKGVuZCwgXCJlbmRcIik7XG4gICAgICAgIHRoaXMuYXhpcyA9IGF4aXM7IC8vIFRPRE8gdmFsaWRhdGVcbiAgICAgICAgLy8gdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHdpZHRoIG9mIHRoZSBsaW5lLiBOb3QgdG8gYmUgY29uZnVzZWQgd2l0aCB0aGUgd2lkdGggb2YgYSByZWN0LlxuICAgICAqXG4gICAgICogQERlcHJlY2F0ZWQgVGhlIGRpbWVuc2lvbiBvZiBhIGxpbmUgaXMgbGVuZ3RoLiBOb3Qgd2lkdGguIFVzZSBsZW5ndGgoKVxuICAgICAqIGluc3RlYWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldCB3aWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kIC0gdGhpcy5zdGFydDtcbiAgICB9XG5cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmQgLSB0aGlzLnN0YXJ0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiBwb2ludCBpcyBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kIHBvc2l0aW9uXG4gICAgICogb2YgdGhlIGxpbmUgKGluY2x1c2l2ZSlcbiAgICAgKlxuICAgICAqIEBwYXJhbSBwdCB7bnVtYmVyfVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgY29udGFpbnNQb2ludChwdDogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhpbihwdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhlIHBvaW50IGlzIHdpdGhpbiB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhpcyBsaW5lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHB0IHtudW1iZXJ9XG4gICAgICovXG4gICAgd2l0aGluKHB0OiBudW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQgPD0gcHQgJiYgcHQgPD0gdGhpcy5lbmQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIGxpbmUgb3ZlcmxhcHMgdGhlIGN1cnJlbnQgbGluZS4gIElFIGVpdGhlciB0aGUgc3RhcnRcbiAgICAgKiBvciBlbmQgcG9pbnQgb24gdGhlIGdpdmVuIGxpbmUgaXMgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCBwb2ludHMgb2YgdGhlXG4gICAgICogY3VycmVudCBsaW5lLlxuICAgICAqXG4gICAgICovXG4gICAgb3ZlcmxhcHMobGluZTogTGluZSk6IGJvb2xlYW4ge1xuICAgICAgICBQcmVjb25kaXRpb25zLmFzc2VydE5vdE51bGwobGluZSwgXCJsaW5lXCIpO1xuXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJERUJVRzogJXMgdnMgJXNcIiwgdGhpcy50b1N0cmluZyhcImludGVydmFsXCIpLCBsaW5lLnRvU3RyaW5nKFwiaW50ZXJ2YWxcIikpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zUG9pbnQobGluZS5zdGFydCkgfHwgdGhpcy5jb250YWluc1BvaW50KGxpbmUuZW5kKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBbZm10XSBvcHRpb25hbCBmb3JtYXQgcGFyYW1ldGVyLiBNYXkgYmUgJ2ludGVydmFsJyBmb3IgaW50ZXJ2YWwgbm90YXRpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRvU3RyaW5nKGZtdDogc3RyaW5nKSB7XG5cbiAgICAgICAgaWYoZm10ID09PSBcImludGVydmFsXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBgWyR7dGhpcy5zdGFydH0sJHt0aGlzLmVuZH1dYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBge3N0YXJ0OiAke3RoaXMuc3RhcnR9LCBlbmQ6ICR7dGhpcy5lbmR9fWA7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZCBhIG5ldyBsaW5lIGJhc2VkIG9uIHRoZSBnaXZlbiBzY2FsYXIuICBFc3NlbnRpYWxseSB0aGlzIG1vZGVsc1xuICAgICAqIHRoZSBsaW5lIGFzIGEgdmVjdG9yIHdpdGggemVybyBhcyB0aGUgb3JpZ2luIGFuZCBsZW5ndGggYXMgdGhlIG1hZ25pdHVkZVxuICAgICAqIGFuZCB3ZSBqdXN0IGFwcGx5IHRoZSBzY2FsYXIgdG8gYnVpbGQgdGhlIG5ldyB2ZWN0b3Igd2l0aCBhIGRpZmZlcmVudFxuICAgICAqIHN0YXJ0IG9yaWdpbi5cbiAgICAgKlxuICAgICAqL1xuICAgIG11bHRpcGx5KHNjYWxhcjogbnVtYmVyKTogTGluZSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZSh0aGlzLnN0YXJ0ICogc2NhbGFyLCB0aGlzLmVuZCAqIHNjYWxhciwgdGhpcy5heGlzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIE1hdGguZmxvb3Igb24gdGhlIHBvaW50cyBpbiB0aGlzIGxpbmUuXG4gICAgICovXG4gICAgZmxvb3IoKTogTGluZSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZShNYXRoLmZsb29yKHRoaXMuc3RhcnQpLCBNYXRoLmZsb29yKHRoaXMuZW5kKSwgdGhpcy5heGlzKTtcbiAgICB9XG5cbiAgICB0b0pTT04oKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF4aXM6IHRoaXMuYXhpcyxcbiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiB0aGlzLmVuZCxcbiAgICAgICAgICAgIGxlbmd0aDogdGhpcy5sZW5ndGhcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIHN0YXRpYyBpbnRlcnZhbChzdGFydDogbnVtYmVyLCBwdDogbnVtYmVyLCBlbmQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gc3RhcnQgPD0gcHQgJiYgcHQgPD0gZW5kO1xuICAgIH1cblxuICAgIHN0YXRpYyBidWlsZGVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVCdWlsZGVyKCk7XG4gICAgfVxuXG59XG5cbmNsYXNzIExpbmVCdWlsZGVyIHtcblxuICAgIHByaXZhdGUgc3RhcnQ/OiBudW1iZXI7XG5cbiAgICBwcml2YXRlIGVuZD86IG51bWJlcjtcblxuICAgIHByaXZhdGUgbGVuZ3RoPzogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBheGlzPzogc3RyaW5nO1xuXG4gICAgc2V0U3RhcnQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLnN0YXJ0ID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldEVuZCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZW5kID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldExlbmd0aCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHNldEF4aXModmFsdWU6IHN0cmluZykge1xuICAgICAgICB0aGlzLmF4aXMgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgYnVpbGQoKSB7XG5cbiAgICAgICAgbGV0IHN0YXJ0ID0gbm90TnVsbCh0aGlzLnN0YXJ0KTtcblxuICAgICAgICBpZighIGlzUHJlc2VudCh0aGlzLmVuZCkgJiYgaXNQcmVzZW50KHRoaXMubGVuZ3RoKSkge1xuICAgICAgICAgICAgdGhpcy5lbmQgPSBzdGFydCArIHRoaXMubGVuZ3RoITtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBlbmQgPSBub3ROdWxsKHRoaXMuZW5kKTtcblxuICAgICAgICByZXR1cm4gbmV3IExpbmUoc3RhcnQsIGVuZCk7XG5cbiAgICB9XG5cbn1cbiJdfQ==