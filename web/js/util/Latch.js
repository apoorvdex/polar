"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Latch {
    constructor() {
        this._resolve = () => { };
        this._reject = () => { };
        this.resolve = (value) => {
            this._resolve(value);
        };
        this.reject = (reason) => {
            this._reject(reason);
        };
        this.get = () => {
            return this.promise;
        };
        this.promise = new Promise((resolve, reject) => {
            this._resolve = resolve;
            this._reject = reject;
        });
    }
}
exports.Latch = Latch;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGF0Y2guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJMYXRjaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLE1BQWEsS0FBSztJQVVkO1FBTFEsYUFBUSxHQUF3QixHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFHMUMsWUFBTyxHQUEyQixHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFnQjdDLFlBQU8sR0FBRyxDQUFDLEtBQVEsRUFBRSxFQUFFO1lBQzFCLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFBO1FBR00sV0FBTSxHQUFHLENBQUMsTUFBVyxFQUFFLEVBQUU7WUFDNUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QixDQUFDLENBQUE7UUFHTSxRQUFHLEdBQUcsR0FBZSxFQUFFO1lBQzFCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN4QixDQUFDLENBQUE7UUF4QkcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsRUFBRTtZQUMzQyxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQztZQUN4QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUMxQixDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FxQko7QUF0Q0Qsc0JBc0NDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZXNvbHZhYmxlUHJvbWlzZX0gZnJvbSBcIi4vUmVzb2x2YWJsZVByb21pc2VcIjtcblxuLyoqXG4gKiBBIGxhdGNoIHRoYXQgY2FuIGJlIHJlc29sdmVkLiBMaWtlIGEgUmVzb2x2ZWFibGVQcm9taXNlIGJ5XG4gKi9cbmV4cG9ydCBjbGFzcyBMYXRjaDxUPiB7XG5cbiAgICBwcml2YXRlIHByb21pc2U6IFByb21pc2U8VD47XG5cbiAgICAvLyBub2luc3BlY3Rpb24gVHNMaW50XG4gICAgcHJpdmF0ZSBfcmVzb2x2ZTogKHZhbHVlPzogVCkgPT4gdm9pZCA9ICgpID0+IHsgfTtcblxuICAgIC8vIG5vaW5zcGVjdGlvbiBUc0xpbnRcbiAgICBwcml2YXRlIF9yZWplY3Q6IChyZWFzb24/OiBhbnkpID0+IHZvaWQgPSAoKSA9PiB7IH07XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuX3JlamVjdCA9IHJlamVjdDtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvLyBOT1RFOiB0eXBlc2NyaXB0IHRvIGphdmFzY3JpcHQgd2lsbCBwcm9wZXJseSBzZXJpYWxpemUgbWV0aG9kcyBpbnRvXG4gICAgLy8gdGhlIElQQyByZW5kZXJlciB3aGVuIGFzc2lnbmluZyBtZXRob2RzIHRvIHByb3BlcnRpZXMgYXMgdGhleSBhcmUgdGhlblxuICAgIC8vIGVudW1lcmFibGUuXG5cbiAgICAvLyBub2luc3BlY3Rpb24gVHNMaW50XG4gICAgcHVibGljIHJlc29sdmUgPSAodmFsdWU6IFQpID0+IHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIFRzTGludFxuICAgIHB1YmxpYyByZWplY3QgPSAocmVhc29uOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5fcmVqZWN0KHJlYXNvbik7XG4gICAgfVxuXG4gICAgLy8gbm9pbnNwZWN0aW9uIFRzTGludFxuICAgIHB1YmxpYyBnZXQgPSAoKTogUHJvbWlzZTxUPiA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb21pc2U7XG4gICAgfVxuXG59XG4iXX0=