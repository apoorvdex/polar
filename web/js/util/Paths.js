"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("../Preconditions");
class Paths {
    static create(dirname, basename) {
        if (!Preconditions_1.isPresent(dirname))
            throw new Error("Dirname required");
        if (!Preconditions_1.isPresent(basename))
            throw new Error("Basename required");
        if (dirname.indexOf("//") !== -1 || basename.indexOf("//") !== -1) {
            throw new Error("No // in dirname");
        }
        let result = dirname + "/" + basename;
        result = result.replace(/\/\/+/g, "/");
        result = result.replace(/\/$/g, "");
        return result;
    }
    static join(a, b) {
        return this.create(a, b);
    }
    static basename(data) {
        let end = data.lastIndexOf("/");
        if (end <= -1) {
            return data;
        }
        return data.substring(end + 1, data.length);
    }
}
exports.Paths = Paths;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGF0aHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQYXRocy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG9EQUEyQztBQUUzQyxNQUFhLEtBQUs7SUFVZCxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQWUsRUFBRSxRQUFnQjtRQUUzQyxJQUFHLENBQUUseUJBQVMsQ0FBQyxPQUFPLENBQUM7WUFDbkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBRXhDLElBQUcsQ0FBRSx5QkFBUyxDQUFDLFFBQVEsQ0FBQztZQUNwQixNQUFNLElBQUksS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFekMsSUFBRyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUk7WUFFaEUsTUFBTSxJQUFJLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1NBQ3ZDO1FBRUQsSUFBSSxNQUFNLEdBQUcsT0FBTyxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUM7UUFHdEMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBR3ZDLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVwQyxPQUFPLE1BQU0sQ0FBQztJQUVsQixDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFTLEVBQUUsQ0FBUztRQUM1QixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFNRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQVk7UUFFeEIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVoQyxJQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUVWLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxHQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFOUMsQ0FBQztDQUVKO0FBeERELHNCQXdEQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aXNQcmVzZW50fSBmcm9tICcuLi9QcmVjb25kaXRpb25zJztcblxuZXhwb3J0IGNsYXNzIFBhdGhzIHtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHBhdGggZnJvbSB0aGUgZ2l2ZW4gcGFydHMgcmVnYXJkbGVzcyBvZiB0aGVpciBzdHJ1Y3R1cmUuXG4gICAgICpcbiAgICAgKiBEb24ndCBhbGxvdyBkb3VibGUgLy8gb3IgdHJhaWxpbmcgLy4gIFRoZSBvdXRwdXQgaXMgYWx3YXlzIHNhbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGlybmFtZVxuICAgICAqIEBwYXJhbSBiYXNlbmFtZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGlybmFtZTogc3RyaW5nLCBiYXNlbmFtZTogc3RyaW5nKSB7XG5cbiAgICAgICAgaWYoISBpc1ByZXNlbnQoZGlybmFtZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEaXJuYW1lIHJlcXVpcmVkXCIpO1xuXG4gICAgICAgIGlmKCEgaXNQcmVzZW50KGJhc2VuYW1lKSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhc2VuYW1lIHJlcXVpcmVkXCIpO1xuXG4gICAgICAgIGlmKGRpcm5hbWUuaW5kZXhPZihcIi8vXCIpICE9PSAtMSB8fCBiYXNlbmFtZS5pbmRleE9mKFwiLy9cIikgIT09IC0xICApIHtcbiAgICAgICAgICAgIC8vIGRvbid0IGFsbG93IC8vIGluIGRpcm5hbWUgYWxyZWFkeSBhcyB3ZSB3b3VsZCBjb3JydXB0XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyAvLyBpbiBkaXJuYW1lXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHJlc3VsdCA9IGRpcm5hbWUgKyBcIi9cIiArIGJhc2VuYW1lO1xuXG4gICAgICAgIC8vIHJlcGxhY2UgbXVsdGlwbGUgc2xhc2hlcyBpbiBkaXJlY3RvcnkgcGFydHNcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xcL1xcLysvZywgXCIvXCIpO1xuXG4gICAgICAgIC8vIHJlbW92ZSBhbnkgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICByZXN1bHQgPSByZXN1bHQucmVwbGFjZSgvXFwvJC9nLCBcIlwiKTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgfVxuXG4gICAgc3RhdGljIGpvaW4oYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGUoYSwgYik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsYXN0IHBvcnRpb24gb2YgdGhlIHBhdGguXG4gICAgICpcbiAgICAgKi9cbiAgICBzdGF0aWMgYmFzZW5hbWUoZGF0YTogc3RyaW5nKSB7XG5cbiAgICAgICAgbGV0IGVuZCA9IGRhdGEubGFzdEluZGV4T2YoXCIvXCIpO1xuXG4gICAgICAgIGlmKGVuZCA8PSAtMSkge1xuICAgICAgICAgICAgLy8gVE9ETzogbWlnaHQgd2FudCB0byByZXR1cm4gYW4gT3B0aW9uYWwgaGVyZS5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRhdGEuc3Vic3RyaW5nKGVuZCsxLCBkYXRhLmxlbmd0aCk7XG5cbiAgICB9XG5cbn1cbiJdfQ==