"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("../../Preconditions");
class Optional {
    constructor(value, name) {
        this.name = undefined;
        this.value = undefined;
        this.value = value;
        this.name = name;
    }
    map(mapFunction) {
        if (this.isPresent()) {
            const mapped = mapFunction(this.value);
            if (Optional.present(mapped)) {
                return new Optional(mapped, this.name);
            }
        }
        return new Optional(undefined, this.name);
    }
    when(consumeFunction) {
        if (this.isPresent()) {
            consumeFunction(this.value);
        }
    }
    filter(filterFunction) {
        if (this.isPresent() && filterFunction(this.value)) {
            return new Optional(this.value);
        }
        return new Optional(undefined, this.name);
    }
    get() {
        if (this.isPresent()) {
            return this.value;
        }
        else {
            throw new Error("The value is undefined");
        }
    }
    getOrElse(value) {
        if (this.isPresent()) {
            return this.value;
        }
        return value;
    }
    getOrUndefined() {
        if (this.value === null) {
            return undefined;
        }
        return this.value;
    }
    getOrNull() {
        if (this.value === null) {
            return null;
        }
        return this.value;
    }
    isPresent() {
        return this.value !== undefined && this.value !== null;
    }
    validateString() {
        return this.validateTypeof('string')
            .map(current => current);
    }
    validateBoolean() {
        return this.validateTypeof('boolean')
            .map(current => current);
    }
    validateNumber() {
        return this.validateTypeof('number')
            .map(current => current);
    }
    toAny() {
        return this.map(current => current);
    }
    validateTypeof(typeOf) {
        if (this.isPresent() && typeof this.value === typeOf) {
            return this;
        }
        return Optional.empty();
    }
    static of(value, name) {
        return new Optional(value, name);
    }
    static first(...values) {
        for (const value of values) {
            let val;
            if (value instanceof Optional) {
                val = value.getOrUndefined();
            }
            else {
                val = value;
            }
            if (Preconditions_1.isPresent(val)) {
                return Optional.of(val);
            }
        }
        return Optional.empty();
    }
    static empty(name) {
        return new Optional(undefined, name);
    }
    static present(obj) {
        return obj !== undefined && obj !== null;
    }
}
exports.Optional = Optional;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT3B0aW9uYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJPcHRpb25hbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVEQUE4QztBQUU5QyxNQUFhLFFBQVE7SUFFakIsWUFBWSxLQUEyQixFQUFFLElBQWE7UUFRdEMsU0FBSSxHQUFZLFNBQVMsQ0FBQztRQUV6QixVQUFLLEdBQXlCLFNBQVMsQ0FBQztRQVRyRCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0lBU00sR0FBRyxDQUFJLFdBQTJDO1FBRXJELElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFO1lBRWxCLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsS0FBTSxDQUFDLENBQUM7WUFFeEMsSUFBSSxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUMxQixPQUFPLElBQUksUUFBUSxDQUFpQixNQUFPLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2FBQzNEO1NBRUo7UUFFRCxPQUFPLElBQUksUUFBUSxDQUFpQixTQUFTLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRTlELENBQUM7SUFFTSxJQUFJLENBQUMsZUFBZ0Q7UUFFeEQsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUU7WUFDbEIsZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsQ0FBQztTQUNoQztJQUVMLENBQUM7SUFFTSxNQUFNLENBQUMsY0FBOEM7UUFFeEQsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFNLENBQUMsRUFBRTtZQUNqRCxPQUFPLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNuQztRQUVELE9BQU8sSUFBSSxRQUFRLENBQUksU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVqRCxDQUFDO0lBRU0sR0FBRztRQUVOLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFO1lBQ2xCLE9BQU8sSUFBSSxDQUFDLEtBQU0sQ0FBQztTQUN0QjthQUFNO1lBQ0gsTUFBTSxJQUFJLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQzdDO0lBRUwsQ0FBQztJQUVNLFNBQVMsQ0FBQyxLQUFxQjtRQUVsQyxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRTtZQUNsQixPQUFPLElBQUksQ0FBQyxLQUFNLENBQUM7U0FDdEI7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0lBS00sY0FBYztRQUVqQixJQUFJLElBQUksQ0FBQyxLQUFLLEtBQUssSUFBSSxFQUFFO1lBQ3JCLE9BQU8sU0FBUyxDQUFDO1NBQ3BCO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFLTSxTQUFTO1FBRVosSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLElBQUksRUFBRTtZQUNyQixPQUFPLElBQUksQ0FBQztTQUNmO1FBRUQsT0FBTyxJQUFJLENBQUMsS0FBTSxDQUFDO0lBQ3ZCLENBQUM7SUFFTSxTQUFTO1FBQ1osT0FBTyxJQUFJLENBQUMsS0FBSyxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLElBQUksQ0FBQztJQUMzRCxDQUFDO0lBT00sY0FBYztRQUVqQixPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDO2FBQy9CLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQWMsQ0FBQyxDQUFDO0lBRXhDLENBQUM7SUFNTSxlQUFlO1FBRWxCLE9BQU8sSUFBSSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7YUFDaEMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBYyxDQUFDLENBQUM7SUFFeEMsQ0FBQztJQU1NLGNBQWM7UUFFakIsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQzthQUMvQixHQUFHLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFjLENBQUMsQ0FBQztJQUV4QyxDQUFDO0lBUU0sS0FBSztRQUNSLE9BQU8sSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE9BQWMsQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFTTSxjQUFjLENBQUMsTUFBc0I7UUFFeEMsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksT0FBTyxJQUFJLENBQUMsS0FBSyxLQUFLLE1BQU0sRUFBRTtZQUNsRCxPQUFPLElBQUksQ0FBQztTQUNmO1FBRUQsT0FBTyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7SUFFNUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxFQUFFLENBQUksS0FBMkIsRUFBRSxJQUFhO1FBQzFELE9BQU8sSUFBSSxRQUFRLENBQUksS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3hDLENBQUM7SUFPTSxNQUFNLENBQUMsS0FBSyxDQUFJLEdBQUcsTUFBaUQ7UUFFdkUsS0FBSyxNQUFNLEtBQUssSUFBSSxNQUFNLEVBQUU7WUFFeEIsSUFBSSxHQUF5QixDQUFDO1lBRTlCLElBQUksS0FBSyxZQUFZLFFBQVEsRUFBRTtnQkFDM0IsR0FBRyxHQUFHLEtBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQzthQUNoQztpQkFBTTtnQkFDSCxHQUFHLEdBQUcsS0FBSyxDQUFDO2FBQ2Y7WUFFRCxJQUFJLHlCQUFTLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2hCLE9BQU8sUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMzQjtTQUVKO1FBRUQsT0FBTyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxLQUFLLENBQUksSUFBYTtRQUNoQyxPQUFPLElBQUksUUFBUSxDQUFJLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBTU0sTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFTO1FBQzNCLE9BQU8sR0FBRyxLQUFLLFNBQVMsSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDO0lBQzdDLENBQUM7Q0FFSjtBQXRNRCw0QkFzTUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2lzUHJlc2VudH0gZnJvbSAnLi4vLi4vUHJlY29uZGl0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBPcHRpb25hbDxUPiB7XG5cbiAgICBjb25zdHJ1Y3Rvcih2YWx1ZTogVCB8IHVuZGVmaW5lZCB8IG51bGwsIG5hbWU/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuIG5hbWUgZm9yIHRoaXMgT3B0aW9uYWwgd2hpY2ggY2FuIGJlIHVzZWQgd2hlbiBnZW5lcmF0aW5nIGVycm9ycy5cbiAgICAgKi9cbiAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZT86IHN0cmluZyA9IHVuZGVmaW5lZDtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gICAgcHVibGljIG1hcDxWPihtYXBGdW5jdGlvbjogTWFwRnVuY3Rpb248Tm9uTnVsbGFibGU8VD4sIFY+KTogT3B0aW9uYWw8Tm9uTnVsbGFibGU8Vj4+IHtcblxuICAgICAgICBpZiAodGhpcy5pc1ByZXNlbnQoKSkge1xuXG4gICAgICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXBGdW5jdGlvbih0aGlzLnZhbHVlISk7XG5cbiAgICAgICAgICAgIGlmIChPcHRpb25hbC5wcmVzZW50KG1hcHBlZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE9wdGlvbmFsPE5vbk51bGxhYmxlPFY+PihtYXBwZWQhLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IE9wdGlvbmFsPE5vbk51bGxhYmxlPFY+Pih1bmRlZmluZWQsIHRoaXMubmFtZSk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgd2hlbihjb25zdW1lRnVuY3Rpb246IENvbnN1bWVGdW5jdGlvbjxOb25OdWxsYWJsZTxUPj4pIHtcblxuICAgICAgICBpZiAodGhpcy5pc1ByZXNlbnQoKSkge1xuICAgICAgICAgICAgY29uc3VtZUZ1bmN0aW9uKHRoaXMudmFsdWUhKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgcHVibGljIGZpbHRlcihmaWx0ZXJGdW5jdGlvbjogRmlsdGVyRnVuY3Rpb248Tm9uTnVsbGFibGU8VD4+KTogT3B0aW9uYWw8VD4ge1xuXG4gICAgICAgIGlmICh0aGlzLmlzUHJlc2VudCgpICYmIGZpbHRlckZ1bmN0aW9uKHRoaXMudmFsdWUhKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcHRpb25hbCh0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXcgT3B0aW9uYWw8VD4odW5kZWZpbmVkLCB0aGlzLm5hbWUpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIGdldCgpOiBOb25OdWxsYWJsZTxUPiB7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQcmVzZW50KCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlITtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSB2YWx1ZSBpcyB1bmRlZmluZWRcIik7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRPckVsc2UodmFsdWU6IE5vbk51bGxhYmxlPFQ+KTogTm9uTnVsbGFibGU8VD4ge1xuXG4gICAgICAgIGlmICh0aGlzLmlzUHJlc2VudCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvciByZXR1cm4gdW5kZWZpbmVkIGlmIGl0IGlzIGFic2VudC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T3JVbmRlZmluZWQoKTogVCB8IHVuZGVmaW5lZCB7XG5cbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbHVlIG9yIHJldHVybiBudWxsIGlmIGl0IGlzIGFic2VudC5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0T3JOdWxsKCk6IFQgfCBudWxsIHtcblxuICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSE7XG4gICAgfVxuXG4gICAgcHVibGljIGlzUHJlc2VudCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnZhbHVlICE9PSBudWxsO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc2VlIHt2YWxpZGF0ZVR5cGVvZn1cbiAgICAgKi9cbiAgICBwdWJsaWMgdmFsaWRhdGVTdHJpbmcoKTogT3B0aW9uYWw8c3RyaW5nPiB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVUeXBlb2YoJ3N0cmluZycpXG4gICAgICAgICAgICAubWFwKGN1cnJlbnQgPT4gY3VycmVudCBhcyBhbnkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc2VlIHt2YWxpZGF0ZVR5cGVvZn1cbiAgICAgKi9cbiAgICBwdWJsaWMgdmFsaWRhdGVCb29sZWFuKCk6IE9wdGlvbmFsPGJvb2xlYW4+IHtcblxuICAgICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVR5cGVvZignYm9vbGVhbicpXG4gICAgICAgICAgICAubWFwKGN1cnJlbnQgPT4gY3VycmVudCBhcyBhbnkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAc2VlIHt2YWxpZGF0ZVR5cGVvZn1cbiAgICAgKi9cbiAgICBwdWJsaWMgdmFsaWRhdGVOdW1iZXIoKTogT3B0aW9uYWw8bnVtYmVyPiB7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGVUeXBlb2YoJ251bWJlcicpXG4gICAgICAgICAgICAubWFwKGN1cnJlbnQgPT4gY3VycmVudCBhcyBhbnkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCB0aGlzIHRvIGFuICdhbnknIHR5cGUuICBUaGlzIGlzIGhlbHBmdWwgaW4gc29tZSBzaXR1YXRpb25zIGFzXG4gICAgICogVHlwZXNjcmlwdCBkb2Vzbid0IGxpa2UgZm9yY2VkIHR5cGluZyBvZiBnZW5lcmlmaWVkIHR5cGVzIGxpa2VcbiAgICAgKiBOb25OdWxsYWJsZSBhbmQgY2FsbGluZyBhIHNpbXBsZSBtZXRob2QgbGlrZSB0b0FueSBpcyBjbGVhbmVyIHRoYW5cbiAgICAgKiBkb2luZyBhIG1hcCBpbiB5b3VyIGNvZGUuXG4gICAgICovXG4gICAgcHVibGljIHRvQW55KCk6IE9wdGlvbmFsPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXAoY3VycmVudCA9PiBjdXJyZW50IGFzIGFueSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVmFsaWRhdGUgdGhlICd0eXBlb2YnIHRoZSB2YWx1ZS4gVGhpcyBpcyBoZWxwZnVsIHdoZW4gd2UgaGF2ZSBhbiB1bnNhZmVcbiAgICAgKiBkYXRhIHNvdXJjZSBsaWtlIGEgSlNPTiBkZWNvZGVyIHdoZXJlIGhhdmUgYSBUeXBlc2NyaXB0IGRlY2xhcmVkIHR5cGUgb2ZcbiAgICAgKiBYIGJ1dCB0aGUgSlNPTiBkZWNvZGVyIHB1bGxlZCBvdXQgdHlwZSBZLiAgVGhpcyB3YXkgd2UgY2FuIGd1YXJkIHRoZSB2YWx1ZVxuICAgICAqIGJlZm9yZSB3ZSB3b3JrIHdpdGggaXQgYW5kIGp1c3QgcmV0dXJuIGFuIGVtcHR5IE9wdGlvbmFsLlxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIHZhbGlkYXRlVHlwZW9mKHR5cGVPZjogSmF2YXNjcmlwdFR5cGUpOiBPcHRpb25hbDxUPiB7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNQcmVzZW50KCkgJiYgdHlwZW9mIHRoaXMudmFsdWUgPT09IHR5cGVPZikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gT3B0aW9uYWwuZW1wdHkoKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgb2Y8VD4odmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkLCBuYW1lPzogc3RyaW5nKTogT3B0aW9uYWw8VD4ge1xuICAgICAgICByZXR1cm4gbmV3IE9wdGlvbmFsPFQ+KHZhbHVlLCBuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGZpcnN0IHZhbHVlIGluIGEgc2V0IG9mIHZhbHVlcy4gIFRoaXMgaXMgYSBjb21tb24gcGF0dGVybiBhbmRcbiAgICAgKiB3ZSBjb3VsZCB1c2UgbG9kYXNoIG9yIGEgc3RyZWFtLWxpa2UgQVBJIGJ1dCBpdCdzIGEgYml0IGVhc2llciB0byBqdXN0XG4gICAgICogZG8gaXQgdGhpcyB3YXkuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBmaXJzdDxUPiguLi52YWx1ZXM6IEFycmF5PFQgfCBudWxsIHwgdW5kZWZpbmVkIHwgT3B0aW9uYWw8VD4+KTogT3B0aW9uYWw8VD4ge1xuXG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG5cbiAgICAgICAgICAgIGxldCB2YWw6IFQgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBPcHRpb25hbCkge1xuICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlLmdldE9yVW5kZWZpbmVkKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbCA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNQcmVzZW50KHZhbCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gT3B0aW9uYWwub2YodmFsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE9wdGlvbmFsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBlbXB0eTxUPihuYW1lPzogc3RyaW5nKTogT3B0aW9uYWw8VD4ge1xuICAgICAgICByZXR1cm4gbmV3IE9wdGlvbmFsPFQ+KHVuZGVmaW5lZCwgbmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRydWUgaWYgdGhlIGdpdmVuIG9iamVjdCBpcyBwcmVzZW50LlxuICAgICAqXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBwcmVzZW50KG9iaj86IGFueSkge1xuICAgICAgICByZXR1cm4gb2JqICE9PSB1bmRlZmluZWQgJiYgb2JqICE9PSBudWxsO1xuICAgIH1cblxufVxuXG4vKipcbiAqIEp1c3QgY29uc3VtZSBhIHZhbHVlIHdpdGggbm8gbmVlZCB0byByZXR1cm4gYW55IHJlc3VsdC5cbiAqL1xuZXhwb3J0IHR5cGUgQ29uc3VtZUZ1bmN0aW9uPFQ+ID0gKHZhbHVlOiBUKSA9PiB2b2lkO1xuXG5leHBvcnQgdHlwZSBNYXBGdW5jdGlvbjxULCBWPiA9ICh2YWx1ZTogVCkgPT4gVjtcblxuZXhwb3J0IHR5cGUgRmlsdGVyRnVuY3Rpb248VD4gPSAodmFsdWU6IFQpID0+IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIEphdmFzY3JpcHRUeXBlID0gJ3N0cmluZycgfCAnbnVtYmVyJyB8ICdib29sZWFuJyB8ICdvYmplY3QnO1xuIl19