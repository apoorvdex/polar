"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const electron_1 = require("electron");
const Logger_1 = require("../../logger/Logger");
const SimpleReactor_1 = require("../../reactor/SimpleReactor");
const log = Logger_1.Logger.create();
class DocInfoAdvertisementListenerService {
    constructor() {
        this.reactor = new SimpleReactor_1.SimpleReactor();
        this.listener = this.onDocInfoAdvertisement.bind(this);
    }
    start() {
        electron_1.ipcRenderer.on('doc-info-advertisement', this.listener);
    }
    stop() {
        electron_1.ipcRenderer.removeListener('doc-info-advertisement', this.listener);
    }
    onDocInfoAdvertisement(event, docInfoAdvertisement) {
        log.debug("Received new DocInfo advertisement: ", docInfoAdvertisement);
        this.reactor.dispatchEvent(docInfoAdvertisement);
    }
    addEventListener(docInfoAdvertisementListener) {
        this.reactor.addEventListener(docInfoAdvertisementListener);
    }
}
exports.DocInfoAdvertisementListenerService = DocInfoAdvertisementListenerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jSW5mb0FkdmVydGlzZW1lbnRMaXN0ZW5lclNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJEb2NJbmZvQWR2ZXJ0aXNlbWVudExpc3RlbmVyU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHVDQUFxQztBQUVyQyxnREFBMkM7QUFDM0MsK0RBQTBEO0FBRTFELE1BQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUU1QixNQUFhLG1DQUFtQztJQU01QztRQUppQixZQUFPLEdBQXdDLElBQUksNkJBQWEsRUFBRSxDQUFDO1FBS2hGLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMzRCxDQUFDO0lBRU0sS0FBSztRQUNSLHNCQUFXLENBQUMsRUFBRSxDQUFDLHdCQUF3QixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRU0sSUFBSTtRQUNQLHNCQUFXLENBQUMsY0FBYyxDQUFDLHdCQUF3QixFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRU8sc0JBQXNCLENBQUMsS0FBVSxFQUFFLG9CQUEwQztRQUNqRixHQUFHLENBQUMsS0FBSyxDQUFDLHNDQUFzQyxFQUFFLG9CQUFvQixDQUFDLENBQUM7UUFDeEUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRU0sZ0JBQWdCLENBQUMsNEJBQTBEO1FBQzlFLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsNEJBQTRCLENBQUMsQ0FBQztJQUNoRSxDQUFDO0NBRUo7QUEzQkQsa0ZBMkJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpcGNSZW5kZXJlcn0gZnJvbSAnZWxlY3Ryb24nO1xuaW1wb3J0IHtEb2NJbmZvQWR2ZXJ0aXNlbWVudCwgRG9jSW5mb0FkdmVydGlzZW1lbnRMaXN0ZW5lcn0gZnJvbSAnLi9Eb2NJbmZvQWR2ZXJ0aXNlbWVudCc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vLi4vbG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQge1NpbXBsZVJlYWN0b3J9IGZyb20gJy4uLy4uL3JlYWN0b3IvU2ltcGxlUmVhY3Rvcic7XG5cbmNvbnN0IGxvZyA9IExvZ2dlci5jcmVhdGUoKTtcblxuZXhwb3J0IGNsYXNzIERvY0luZm9BZHZlcnRpc2VtZW50TGlzdGVuZXJTZXJ2aWNlIHtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgcmVhY3RvcjogU2ltcGxlUmVhY3RvcjxEb2NJbmZvQWR2ZXJ0aXNlbWVudD4gPSBuZXcgU2ltcGxlUmVhY3RvcigpO1xuXG4gICAgcHJpdmF0ZSBsaXN0ZW5lcjogKGV2ZW50OiBhbnksIGRvY0luZm9BZHZlcnRpc2VtZW50OiBEb2NJbmZvQWR2ZXJ0aXNlbWVudCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5vbkRvY0luZm9BZHZlcnRpc2VtZW50LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICBpcGNSZW5kZXJlci5vbignZG9jLWluZm8tYWR2ZXJ0aXNlbWVudCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdG9wKCk6IHZvaWQge1xuICAgICAgICBpcGNSZW5kZXJlci5yZW1vdmVMaXN0ZW5lcignZG9jLWluZm8tYWR2ZXJ0aXNlbWVudCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Eb2NJbmZvQWR2ZXJ0aXNlbWVudChldmVudDogYW55LCBkb2NJbmZvQWR2ZXJ0aXNlbWVudDogRG9jSW5mb0FkdmVydGlzZW1lbnQpIHtcbiAgICAgICAgbG9nLmRlYnVnKFwiUmVjZWl2ZWQgbmV3IERvY0luZm8gYWR2ZXJ0aXNlbWVudDogXCIsIGRvY0luZm9BZHZlcnRpc2VtZW50KTtcbiAgICAgICAgdGhpcy5yZWFjdG9yLmRpc3BhdGNoRXZlbnQoZG9jSW5mb0FkdmVydGlzZW1lbnQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyKGRvY0luZm9BZHZlcnRpc2VtZW50TGlzdGVuZXI6IERvY0luZm9BZHZlcnRpc2VtZW50TGlzdGVuZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZWFjdG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jSW5mb0FkdmVydGlzZW1lbnRMaXN0ZW5lcik7XG4gICAgfVxuXG59XG4iXX0=