"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class DatastoreFiles {
    static isValidFileName(name) {
        return name.search(/^[a-zA-Z0-9_(),{} -]+(\.[a-zA-Z0-9]{3,4})?$/g) !== -1;
    }
    static assertValidFileName(ref) {
        if (!this.isValidFileName(ref.name)) {
            throw new Error("Invalid file name: " + ref.name);
        }
    }
    static sanitizeFileName(name) {
        return name.replace(/[/\\:*?\"<>|]/g, '_');
    }
    static isSanitizedFileName(name) {
        return name.search(/[/\\:*?\"<>|]/) === -1;
    }
    static assertSanitizedFileName(ref) {
        if (!this.isSanitizedFileName(ref.name)) {
            throw new Error("Invalid file name: " + ref.name);
        }
    }
}
exports.DatastoreFiles = DatastoreFiles;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0YXN0b3JlRmlsZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJEYXRhc3RvcmVGaWxlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLE1BQWEsY0FBYztJQU9oQixNQUFNLENBQUMsZUFBZSxDQUFDLElBQVk7UUFDdEMsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLDhDQUE4QyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVNLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxHQUFZO1FBRTFDLElBQUksQ0FBRSxJQUFJLENBQUMsZUFBZSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNsQyxNQUFNLElBQUksS0FBSyxDQUFDLHFCQUFxQixHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNyRDtJQUVMLENBQUM7SUFRTSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsSUFBWTtRQUN2QyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0MsQ0FBQztJQUVNLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFZO1FBQzFDLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBRU0sTUFBTSxDQUFDLHVCQUF1QixDQUFDLEdBQVk7UUFDOUMsSUFBSSxDQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDdEMsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDckQ7SUFDTCxDQUFDO0NBRUo7QUF2Q0Qsd0NBdUNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtGaWxlUmVmfSBmcm9tICcuL0RhdGFzdG9yZSc7XG5cbmV4cG9ydCBjbGFzcyBEYXRhc3RvcmVGaWxlcyB7XG5cbiAgICAvKipcbiAgICAgKiBNYWtlIHN1cmUgdGhlIGZpbGUgbmFtZSBpcyBzYW5lIC4uLiBub3RoaW5nIHRoYXQgY2FuJ3QgYmUgZW5jb2RlZFxuICAgICAqIGFzIGEgZmlsZSBhbmQgbXVzdCBoYXZlIGEgdGhyZWUgbGV0dGVyIGV4dGVuc2lvbi4gIFdlIHNob3VsZCBqdXN0IGhhdmVcbiAgICAgKiB0aGUgZmlsZXMgYmUgYWxwaGFudW1lcmljIGZvciBub3cgYW5kIHN1cHBvcnQgYSAzLTQgY2hhciBzdWZmaXguXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBpc1ZhbGlkRmlsZU5hbWUobmFtZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBuYW1lLnNlYXJjaCgvXlthLXpBLVowLTlfKCkse30gLV0rKFxcLlthLXpBLVowLTldezMsNH0pPyQvZykgIT09IC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXNzZXJ0VmFsaWRGaWxlTmFtZShyZWY6IEZpbGVSZWYpIHtcblxuICAgICAgICBpZiAoISB0aGlzLmlzVmFsaWRGaWxlTmFtZShyZWYubmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZmlsZSBuYW1lOiBcIiArIHJlZi5uYW1lKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmxhY2tsaXN0IG1vZGVsIHRvIGFjY2VwdCBhIHN0cmluZyBmb3IgYSBmaWxlbmFtZSBhbmQgc3RyaXAgY2hhcmFjdGVyc1xuICAgICAqIHRoYXQgYXJlIGludmFsaWQgYW5kIG5vdCBhY2NlcHRlZCBvbiBtb3N0IGZpbGVzeXN0ZW1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHNhbml0aXplRmlsZU5hbWUobmFtZTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1svXFxcXDoqP1xcXCI8PnxdL2csICdfJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBpc1Nhbml0aXplZEZpbGVOYW1lKG5hbWU6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmFtZS5zZWFyY2goL1svXFxcXDoqP1xcXCI8PnxdLykgPT09IC0xO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXNzZXJ0U2FuaXRpemVkRmlsZU5hbWUocmVmOiBGaWxlUmVmKSB7XG4gICAgICAgIGlmICghIHRoaXMuaXNTYW5pdGl6ZWRGaWxlTmFtZShyZWYubmFtZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZmlsZSBuYW1lOiBcIiArIHJlZi5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxufVxuIl19