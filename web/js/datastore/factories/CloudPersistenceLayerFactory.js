"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = require("../../logger/Logger");
const DefaultPersistenceLayer_1 = require("../DefaultPersistenceLayer");
const AdvertisingPersistenceLayer_1 = require("../advertiser/AdvertisingPersistenceLayer");
const RemoteDatastores_1 = require("../RemoteDatastores");
const CloudAwareDatastore_1 = require("../CloudAwareDatastore");
const FirebaseDatastore_1 = require("../FirebaseDatastore");
const log = Logger_1.Logger.create();
class CloudPersistenceLayerFactory {
    static create() {
        log.info("Using remote persistence layer and cloud aware data store");
        const local = RemoteDatastores_1.RemoteDatastores.create();
        const cloud = new FirebaseDatastore_1.FirebaseDatastore();
        const datastore = new CloudAwareDatastore_1.CloudAwareDatastore(local, cloud);
        const defaultPersistenceLayer = new DefaultPersistenceLayer_1.DefaultPersistenceLayer(datastore);
        const advertisingPersistenceLayer = new AdvertisingPersistenceLayer_1.AdvertisingPersistenceLayer(defaultPersistenceLayer);
        return advertisingPersistenceLayer;
    }
}
exports.CloudPersistenceLayerFactory = CloudPersistenceLayerFactory;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xvdWRQZXJzaXN0ZW5jZUxheWVyRmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNsb3VkUGVyc2lzdGVuY2VMYXllckZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxnREFBMkM7QUFFM0Msd0VBQW1FO0FBQ25FLDJGQUFzRjtBQUN0RiwwREFBcUQ7QUFDckQsZ0VBQTJEO0FBQzNELDREQUF1RDtBQUd2RCxNQUFNLEdBQUcsR0FBRyxlQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFFNUIsTUFBYSw0QkFBNEI7SUFFOUIsTUFBTSxDQUFDLE1BQU07UUFFaEIsR0FBRyxDQUFDLElBQUksQ0FBQywyREFBMkQsQ0FBQyxDQUFDO1FBRXRFLE1BQU0sS0FBSyxHQUFHLG1DQUFnQixDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3hDLE1BQU0sS0FBSyxHQUFHLElBQUkscUNBQWlCLEVBQUUsQ0FBQztRQUV0QyxNQUFNLFNBQVMsR0FBRyxJQUFJLHlDQUFtQixDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztRQUV4RCxNQUFNLHVCQUF1QixHQUFHLElBQUksaURBQXVCLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFdkUsTUFBTSwyQkFBMkIsR0FBRyxJQUFJLHlEQUEyQixDQUFDLHVCQUF1QixDQUFDLENBQUM7UUFFN0YsT0FBTywyQkFBMkIsQ0FBQztJQUV2QyxDQUFDO0NBRUo7QUFuQkQsb0VBbUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uLy4uL2xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHtMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcn0gZnJvbSAnLi4vTGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXInO1xuaW1wb3J0IHtEZWZhdWx0UGVyc2lzdGVuY2VMYXllcn0gZnJvbSAnLi4vRGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXInO1xuaW1wb3J0IHtBZHZlcnRpc2luZ1BlcnNpc3RlbmNlTGF5ZXJ9IGZyb20gJy4uL2FkdmVydGlzZXIvQWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyJztcbmltcG9ydCB7UmVtb3RlRGF0YXN0b3Jlc30gZnJvbSAnLi4vUmVtb3RlRGF0YXN0b3Jlcyc7XG5pbXBvcnQge0Nsb3VkQXdhcmVEYXRhc3RvcmV9IGZyb20gJy4uL0Nsb3VkQXdhcmVEYXRhc3RvcmUnO1xuaW1wb3J0IHtGaXJlYmFzZURhdGFzdG9yZX0gZnJvbSAnLi4vRmlyZWJhc2VEYXRhc3RvcmUnO1xuaW1wb3J0IHtMYXp5V3JpdGVMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcn0gZnJvbSAnLi4vTGF6eVdyaXRlTGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXInO1xuXG5jb25zdCBsb2cgPSBMb2dnZXIuY3JlYXRlKCk7XG5cbmV4cG9ydCBjbGFzcyBDbG91ZFBlcnNpc3RlbmNlTGF5ZXJGYWN0b3J5IHtcblxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKCk6IExpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyIHtcblxuICAgICAgICBsb2cuaW5mbyhcIlVzaW5nIHJlbW90ZSBwZXJzaXN0ZW5jZSBsYXllciBhbmQgY2xvdWQgYXdhcmUgZGF0YSBzdG9yZVwiKTtcblxuICAgICAgICBjb25zdCBsb2NhbCA9IFJlbW90ZURhdGFzdG9yZXMuY3JlYXRlKCk7XG4gICAgICAgIGNvbnN0IGNsb3VkID0gbmV3IEZpcmViYXNlRGF0YXN0b3JlKCk7XG5cbiAgICAgICAgY29uc3QgZGF0YXN0b3JlID0gbmV3IENsb3VkQXdhcmVEYXRhc3RvcmUobG9jYWwsIGNsb3VkKTtcblxuICAgICAgICBjb25zdCBkZWZhdWx0UGVyc2lzdGVuY2VMYXllciA9IG5ldyBEZWZhdWx0UGVyc2lzdGVuY2VMYXllcihkYXRhc3RvcmUpO1xuXG4gICAgICAgIGNvbnN0IGFkdmVydGlzaW5nUGVyc2lzdGVuY2VMYXllciA9IG5ldyBBZHZlcnRpc2luZ1BlcnNpc3RlbmNlTGF5ZXIoZGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXIpO1xuXG4gICAgICAgIHJldHVybiBhZHZlcnRpc2luZ1BlcnNpc3RlbmNlTGF5ZXI7XG5cbiAgICB9XG5cbn1cbiJdfQ==