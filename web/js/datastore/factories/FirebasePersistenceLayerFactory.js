"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = require("../../logger/Logger");
const DefaultPersistenceLayer_1 = require("../DefaultPersistenceLayer");
const FirebaseDatastore_1 = require("../FirebaseDatastore");
const AbstractAdvertisingPersistenceLayer_1 = require("../advertiser/AbstractAdvertisingPersistenceLayer");
const Firebase_1 = require("../../firebase/Firebase");
const log = Logger_1.Logger.create();
class FirebasePersistenceLayerFactory {
    static create() {
        log.info("Using firebase persistence layer");
        Firebase_1.Firebase.init();
        const datastore = new FirebaseDatastore_1.FirebaseDatastore();
        return new NullListenablePersistenceLayer(new DefaultPersistenceLayer_1.DefaultPersistenceLayer(datastore));
    }
}
exports.FirebasePersistenceLayerFactory = FirebasePersistenceLayerFactory;
class NullListenablePersistenceLayer extends AbstractAdvertisingPersistenceLayer_1.AbstractAdvertisingPersistenceLayer {
    constructor(delegate) {
        super(delegate);
        this.id = 'null';
    }
    broadcastEvent(event) {
    }
}
exports.NullListenablePersistenceLayer = NullListenablePersistenceLayer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlyZWJhc2VQZXJzaXN0ZW5jZUxheWVyRmFjdG9yeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkZpcmViYXNlUGVyc2lzdGVuY2VMYXllckZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxnREFBMkM7QUFFM0Msd0VBQW1FO0FBRW5FLDREQUF1RDtBQUN2RCwyR0FBc0c7QUFJdEcsc0RBQWlEO0FBRWpELE1BQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUU1QixNQUFhLCtCQUErQjtJQUVqQyxNQUFNLENBQUMsTUFBTTtRQUVoQixHQUFHLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7UUFFN0MsbUJBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUVoQixNQUFNLFNBQVMsR0FBRyxJQUFJLHFDQUFpQixFQUFFLENBQUM7UUFFMUMsT0FBTyxJQUFJLDhCQUE4QixDQUFDLElBQUksaURBQXVCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUV0RixDQUFDO0NBRUo7QUFkRCwwRUFjQztBQUVELE1BQWEsOEJBQStCLFNBQVEseUVBQW1DO0lBSW5GLFlBQVksUUFBMEI7UUFDbEMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBSEosT0FBRSxHQUF1QixNQUFNLENBQUM7SUFJaEQsQ0FBQztJQUVTLGNBQWMsQ0FBQyxLQUE0QjtJQUNyRCxDQUFDO0NBRUo7QUFYRCx3RUFXQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi8uLi9sb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7TGlzdGVuYWJsZVBlcnNpc3RlbmNlTGF5ZXJ9IGZyb20gJy4uL0xpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyJztcbmltcG9ydCB7RGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXJ9IGZyb20gJy4uL0RlZmF1bHRQZXJzaXN0ZW5jZUxheWVyJztcbmltcG9ydCB7QWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyfSBmcm9tICcuLi9hZHZlcnRpc2VyL0FkdmVydGlzaW5nUGVyc2lzdGVuY2VMYXllcic7XG5pbXBvcnQge0ZpcmViYXNlRGF0YXN0b3JlfSBmcm9tICcuLi9GaXJlYmFzZURhdGFzdG9yZSc7XG5pbXBvcnQge0Fic3RyYWN0QWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyfSBmcm9tICcuLi9hZHZlcnRpc2VyL0Fic3RyYWN0QWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyJztcbmltcG9ydCB7UGVyc2lzdGVuY2VMYXllciwgUGVyc2lzdGVuY2VMYXllcklEfSBmcm9tICcuLi9QZXJzaXN0ZW5jZUxheWVyJztcbmltcG9ydCB7RXJyb3JMaXN0ZW5lcn0gZnJvbSAnLi4vRGF0YXN0b3JlJztcbmltcG9ydCB7UGVyc2lzdGVuY2VMYXllckV2ZW50fSBmcm9tICcuLi9QZXJzaXN0ZW5jZUxheWVyRXZlbnQnO1xuaW1wb3J0IHtGaXJlYmFzZX0gZnJvbSAnLi4vLi4vZmlyZWJhc2UvRmlyZWJhc2UnO1xuXG5jb25zdCBsb2cgPSBMb2dnZXIuY3JlYXRlKCk7XG5cbmV4cG9ydCBjbGFzcyBGaXJlYmFzZVBlcnNpc3RlbmNlTGF5ZXJGYWN0b3J5IHtcblxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKCk6IExpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyIHtcblxuICAgICAgICBsb2cuaW5mbyhcIlVzaW5nIGZpcmViYXNlIHBlcnNpc3RlbmNlIGxheWVyXCIpO1xuXG4gICAgICAgIEZpcmViYXNlLmluaXQoKTtcblxuICAgICAgICBjb25zdCBkYXRhc3RvcmUgPSBuZXcgRmlyZWJhc2VEYXRhc3RvcmUoKTtcblxuICAgICAgICByZXR1cm4gbmV3IE51bGxMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllcihuZXcgRGVmYXVsdFBlcnNpc3RlbmNlTGF5ZXIoZGF0YXN0b3JlKSk7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IGNsYXNzIE51bGxMaXN0ZW5hYmxlUGVyc2lzdGVuY2VMYXllciBleHRlbmRzIEFic3RyYWN0QWR2ZXJ0aXNpbmdQZXJzaXN0ZW5jZUxheWVyIHtcblxuICAgIHB1YmxpYyByZWFkb25seSBpZDogUGVyc2lzdGVuY2VMYXllcklEID0gJ251bGwnO1xuXG4gICAgY29uc3RydWN0b3IoZGVsZWdhdGU6IFBlcnNpc3RlbmNlTGF5ZXIpIHtcbiAgICAgICAgc3VwZXIoZGVsZWdhdGUpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBicm9hZGNhc3RFdmVudChldmVudDogUGVyc2lzdGVuY2VMYXllckV2ZW50KTogdm9pZCB7XG4gICAgfVxuXG59XG5cblxuIl19