"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class PersistenceLayerManagers {
    static onPersistenceManager(persistenceLayerManager, callback, state = 'changed') {
        if (persistenceLayerManager.get()) {
            callback(persistenceLayerManager.get());
        }
        persistenceLayerManager.addEventListener(event => {
            if (event.state === state) {
                callback(event.persistenceLayer);
            }
        });
    }
}
exports.PersistenceLayerManagers = PersistenceLayerManagers;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGVyc2lzdGVuY2VMYXllck1hbmFnZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUGVyc2lzdGVuY2VMYXllck1hbmFnZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBT0EsTUFBYSx3QkFBd0I7SUFZMUIsTUFBTSxDQUFDLG9CQUFvQixDQUFDLHVCQUFnRCxFQUNoRCxRQUFrQyxFQUNsQyxRQUErQixTQUFTO1FBRXZFLElBQUksdUJBQXVCLENBQUMsR0FBRyxFQUFFLEVBQUU7WUFDL0IsUUFBUSxDQUFDLHVCQUF1QixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7U0FDM0M7UUFFRCx1QkFBdUIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUU3QyxJQUFJLEtBQUssQ0FBQyxLQUFLLEtBQUssS0FBSyxFQUFFO2dCQUN2QixRQUFRLENBQUMsS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7YUFDcEM7UUFFTCxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FFSjtBQTlCRCw0REE4QkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKi9cbmltcG9ydCB7UGVyc2lzdGVuY2VMYXllck1hbmFnZXIsIFBlcnNpc3RlbmNlTGF5ZXJTdGF0ZX0gZnJvbSAnLi9QZXJzaXN0ZW5jZUxheWVyTWFuYWdlcic7XG5pbXBvcnQge1BlcnNpc3RlbmNlTGF5ZXJ9IGZyb20gJy4vUGVyc2lzdGVuY2VMYXllcic7XG5pbXBvcnQge0xpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyfSBmcm9tICcuL0xpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyJztcblxuZXhwb3J0IGNsYXNzIFBlcnNpc3RlbmNlTGF5ZXJNYW5hZ2VycyB7XG5cblxuICAgIC8qKlxuICAgICAqIENhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciB0aGUgUGVyc2lzdGVuY2VMYXllciBjdXJyZW50bHkgaW4gcGxhY2UuXG4gICAgICpcbiAgICAgKiBUaGlzIGFsbG93cyB1cyB0byBib3RoIGdldCBhIGNhbGxiYWNrIG9uIHRoZSBDVVJSRU5UIFBlcnNpc3RlbmNlTGF5ZXJcbiAgICAgKiBidXQgYWxzbyB3aGVuIGEgbmV3IFBlcnNpc3RlbmNlTGF5ZXIgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBDYWxsIHRoZSBjYWxsYmFjayBhZ2FpbiB3aGVuIHdlJ3ZlIGNoYW5nZWQgdG8gdGhlIGdpdmVuXG4gICAgICogICAgIHN0YXRlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBvblBlcnNpc3RlbmNlTWFuYWdlcihwZXJzaXN0ZW5jZUxheWVyTWFuYWdlcjogUGVyc2lzdGVuY2VMYXllck1hbmFnZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogUGVyc2lzdGVuY2VMYXllckNhbGxiYWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IFBlcnNpc3RlbmNlTGF5ZXJTdGF0ZSA9ICdjaGFuZ2VkJyApIHtcblxuICAgICAgICBpZiAocGVyc2lzdGVuY2VMYXllck1hbmFnZXIuZ2V0KCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHBlcnNpc3RlbmNlTGF5ZXJNYW5hZ2VyLmdldCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBlcnNpc3RlbmNlTGF5ZXJNYW5hZ2VyLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQuc3RhdGUgPT09IHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXZlbnQucGVyc2lzdGVuY2VMYXllcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IHR5cGUgUGVyc2lzdGVuY2VMYXllckNhbGxiYWNrID0gKHBlcnNpc3RlbmNlTGF5ZXI6IExpc3RlbmFibGVQZXJzaXN0ZW5jZUxheWVyKSA9PiB2b2lkO1xuIl19