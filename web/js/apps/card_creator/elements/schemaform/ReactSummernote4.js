"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const JQuery_1 = __importDefault(require("../../../../ui/JQuery"));
require("bootstrap");
require("summernote/dist/summernote-bs4");
const react_1 = __importStar(require("react"));
const react_dom_1 = __importDefault(require("react-dom"));
const randomUid = () => Math.floor(Math.random() * 100000);
class ReactSummernote4 extends react_1.Component {
    constructor(props) {
        super(props);
        if (this.props.options.id) {
            this.uid = this.props.options.id;
        }
        else {
            this.uid = `react-summernote-${randomUid()}`;
        }
        this.editor = {};
        this.noteEditable = null;
        this.notePlaceholder = null;
        this.onInit = this.onInit.bind(this);
        this.onImageUpload = this.onImageUpload.bind(this);
        this.focus = this.focus.bind(this);
        this.isEmpty = this.isEmpty.bind(this);
        this.reset = this.reset.bind(this);
        this.replace = this.replace.bind(this);
        this.disable = this.disable.bind(this);
        this.enable = this.enable.bind(this);
        this.toggleState = this.toggleState.bind(this);
        this.insertImage = this.insertImage.bind(this);
        this.insertNode = this.insertNode.bind(this);
        this.insertText = this.insertText.bind(this);
        if (this.props.onRichTextMutator) {
            this.props.onRichTextMutator(this);
        }
    }
    componentDidMount() {
        const options = this.props.options || {};
        const codeview = this.props.codeview;
        options.callbacks = this.callbacks;
        const domNode = react_dom_1.default.findDOMNode(this);
        this.editor = JQuery_1.default(domNode).find(`#${this.uid}`);
        this.editor.summernote(options);
        if (codeview) {
            this.editor.summernote('codeview.activate');
        }
        if (options.airMode) {
            domNode.parentElement.addEventListener('click', () => {
                this.editor.summernote('focus');
            });
        }
        if (this.props.autofocus) {
            this.editor.summernote('focus');
        }
    }
    componentWillReceiveProps(nextProps) {
        const { props } = this;
        const codeview = nextProps.codeview;
        const codeviewCommand = codeview ? 'codeview.activate' : 'codeview.deactivate';
        if (typeof nextProps.value === 'string') {
            this.replace(nextProps.value);
        }
        if (typeof nextProps.disabled === 'boolean' && props.disabled !== nextProps.disabled) {
            this.toggleState(nextProps.disabled);
        }
        if (codeview !== props.codeview) {
            this.editor.summernote(codeviewCommand);
        }
        if (this.props.autofocus) {
            this.editor.summernote('focus');
        }
    }
    shouldComponentUpdate() {
        return false;
    }
    componentWillUnmount() {
        if (this.editor.summernote) {
            this.editor.summernote('destroy');
        }
    }
    onInit() {
        const { disabled, onInit } = this.props;
        const $container = this.editor.parent();
        this.noteEditable = $container.find('.note-editable');
        this.notePlaceholder = $container.find('.note-placeholder');
        if (typeof disabled === 'boolean') {
            this.toggleState(disabled);
        }
        if (typeof onInit === 'function') {
            onInit({
                summernote: this.editor.summernote.bind(this.editor),
                focus: this.focus,
                isEmpty: this.isEmpty,
                reset: this.reset,
                replace: this.replace,
                disable: this.disable,
                enable: this.enable,
                insertImage: this.insertImage,
                insertNode: this.insertNode,
                insertText: this.insertText
            });
        }
    }
    onImageUpload(images) {
        const { onImageUpload } = this.props;
        if (typeof onImageUpload === 'function') {
            onImageUpload(images, this.insertImage);
        }
    }
    focus() {
        this.editor.summernote('focus');
    }
    isEmpty() {
        return this.editor.summernote('isEmpty');
    }
    reset() {
        this.editor.summernote('reset');
    }
    replace(content) {
        const { noteEditable, notePlaceholder } = this;
        const prevContent = noteEditable.html();
        const contentLength = content.length;
        if (prevContent !== content) {
            if (this.isEmpty() && contentLength > 0) {
                notePlaceholder.hide();
            }
            else if (contentLength === 0) {
                notePlaceholder.show();
            }
            noteEditable.html(content);
        }
    }
    currentValue() {
        return this.noteEditable.html();
    }
    createRange() {
        return this.editor.summernote('createRange');
    }
    disable() {
        this.editor.summernote('disable');
    }
    enable() {
        this.editor.summernote('enable');
    }
    toggleState(disabled) {
        if (disabled) {
            this.disable();
        }
        else {
            this.enable();
        }
    }
    insertImage(url, filenameOrCallback) {
        this.editor.summernote('insertImage', url, filenameOrCallback);
    }
    insertNode(node) {
        this.editor.summernote('insertNode', node);
    }
    insertText(text) {
        this.editor.summernote('insertText', text);
    }
    get callbacks() {
        const props = this.props;
        return {
            onInit: this.onInit,
            onEnter: props.onEnter,
            onFocus: props.onFocus,
            onBlur: props.onBlur,
            onKeyup: props.onKeyUp,
            onKeydown: props.onKeyDown,
            onPaste: props.onPaste,
            onChange: props.onChange,
            onImageUpload: this.onImageUpload
        };
    }
    render() {
        const { value, defaultValue, className } = this.props;
        const html = value || defaultValue || "";
        return (react_1.default.createElement("div", { className: className },
            react_1.default.createElement("div", { id: this.uid, dangerouslySetInnerHTML: { __html: html } })));
    }
}
exports.ReactSummernote4 = ReactSummernote4;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhY3RTdW1tZXJub3RlNC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlJlYWN0U3VtbWVybm90ZTQudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUVBLG1FQUFzQztBQUN0QyxxQkFBbUI7QUFDbkIsMENBQXdDO0FBRXhDLCtDQUF5QztBQUN6QywwREFBaUM7QUFFakMsTUFBTSxTQUFTLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsTUFBTSxDQUFDLENBQUM7QUFLM0QsTUFBYSxnQkFBaUIsU0FBUSxpQkFBc0I7SUE2QnhELFlBQVksS0FBVTtRQUNsQixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFYixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRTtZQUN2QixJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQztTQUNwQzthQUFNO1lBQ0gsSUFBSSxDQUFDLEdBQUcsR0FBRyxvQkFBb0IsU0FBUyxFQUFFLEVBQUUsQ0FBQztTQUNoRDtRQUVELElBQUksQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO1FBRTVCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckMsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFB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WUFBWSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9DLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBRXpCLE9BQU87WUFDSCxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07WUFDbkIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztZQUN0QixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU07WUFDcEIsT0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO1lBQ3RCLFNBQVMsRUFBRSxLQUFLLENBQUMsU0FBUztZQUMxQixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87WUFDdEIsUUFBUSxFQUFFLEtBQUssQ0FBQyxRQUFRO1lBQ3hCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYTtTQUNwQyxDQUFDO0lBQ04sQ0FBQztJQUVNLE1BQU07UUFDVCxNQUFNLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3RELE1BQU0sSUFBSSxHQUFHLEtBQUssSUFBSSxZQUFZLElBQUksRUFBRSxDQUFDO1FBRXpDLE9BQU8sQ0FDSCx1Q0FBSyxTQUFTLEVBQUUsU0FBUztZQUNyQix1Q0FBSyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBSSxDQUM5RCxDQUNULENBQUM7SUFDTixDQUFDO0NBRUo7QUFuUUQsNENBbVFDIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsICQgKi9cblxuaW1wb3J0ICQgZnJvbSAnLi4vLi4vLi4vLi4vdWkvSlF1ZXJ5JztcbmltcG9ydCAnYm9vdHN0cmFwJztcbmltcG9ydCAnc3VtbWVybm90ZS9kaXN0L3N1bW1lcm5vdGUtYnM0JztcblxuaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHtIVE1MU3RyaW5nLCBSaWNoVGV4dE11dGF0b3J9IGZyb20gJy4vUmljaFRleHRNdXRhdG9yJztcbmNvbnN0IHJhbmRvbVVpZCA9ICgpID0+IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCk7XG5cbi8qKlxuICogUmVhY3QgU3VtbWVybm90ZSBmb3IgVHdpdHRlciBCb29zdHJhcCB2NFxuICovXG5leHBvcnQgY2xhc3MgUmVhY3RTdW1tZXJub3RlNCBleHRlbmRzIENvbXBvbmVudDxJUHJvcHMsIGFueT4gaW1wbGVtZW50cyBSaWNoVGV4dE11dGF0b3Ige1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSB1aWQ6IHN0cmluZztcblxuICAgIHByaXZhdGUgZWRpdG9yOiBhbnk7XG5cbiAgICBwcml2YXRlIG5vdGVFZGl0YWJsZTogYW55O1xuXG4gICAgcHJpdmF0ZSBub3RlUGxhY2Vob2xkZXI6IGFueTtcblxuICAgIC8vIFJlYWN0U3VtbWVybm90ZS5wcm9wVHlwZXMgPSB7XG4gICAgLy8gICAgIHZhbHVlOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIC8vICAgICBkZWZhdWx0VmFsdWU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgLy8gICAgIGNvZGV2aWV3OiBQcm9wVHlwZXMuYm9vbCxcbiAgICAvLyAgICAgY2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIC8vICAgICBvcHRpb25zOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIC8vICAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvLyAgICAgb25Jbml0OiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25FbnRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uRm9jdXM6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vICAgICBvbkJsdXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vICAgICBvbktleVVwOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25LZXlEb3duOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25QYXN0ZTogUHJvcFR5cGVzLmZ1bmMsXG4gICAgLy8gICAgIG9uQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICAvLyAgICAgb25JbWFnZVVwbG9hZDogUHJvcFR5cGVzLmZ1bmNcbiAgICAvLyB9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IGFueSkge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5pZCkge1xuICAgICAgICAgICAgdGhpcy51aWQgPSB0aGlzLnByb3BzLm9wdGlvbnMuaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IGByZWFjdC1zdW1tZXJub3RlLSR7cmFuZG9tVWlkKCl9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWRpdG9yID0ge307XG4gICAgICAgIHRoaXMubm90ZUVkaXRhYmxlID0gbnVsbDtcbiAgICAgICAgdGhpcy5ub3RlUGxhY2Vob2xkZXIgPSBudWxsO1xuXG4gICAgICAgIHRoaXMub25Jbml0ID0gdGhpcy5vbkluaXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkltYWdlVXBsb2FkID0gdGhpcy5vbkltYWdlVXBsb2FkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZm9jdXMgPSB0aGlzLmZvY3VzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNFbXB0eSA9IHRoaXMuaXNFbXB0eS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlc2V0ID0gdGhpcy5yZXNldC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlcGxhY2UgPSB0aGlzLnJlcGxhY2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlID0gdGhpcy5kaXNhYmxlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZW5hYmxlID0gdGhpcy5lbmFibGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50b2dnbGVTdGF0ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pbnNlcnRJbWFnZSA9IHRoaXMuaW5zZXJ0SW1hZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5pbnNlcnROb2RlID0gdGhpcy5pbnNlcnROb2RlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dCA9IHRoaXMuaW5zZXJ0VGV4dC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uUmljaFRleHRNdXRhdG9yKSB7XG4gICAgICAgICAgICAvLyBnaXZlIHRoZSBjYWxsZXIgYWNjZXNzIHRvIHN1bW1lcm5vdGUgdG8gcGVyZm9ybSBpdHMgb3duXG4gICAgICAgICAgICAvLyBtdXRhdGlvbiB3aGVuIG5lY2Vzc2FyeS5cbiAgICAgICAgICAgIHRoaXMucHJvcHMub25SaWNoVGV4dE11dGF0b3IodGhpcyk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpIHtcblxuICAgICAgICBjb25zdCBvcHRpb25zID0gdGhpcy5wcm9wcy5vcHRpb25zIHx8IHt9O1xuICAgICAgICBjb25zdCBjb2RldmlldyA9IHRoaXMucHJvcHMuY29kZXZpZXc7XG4gICAgICAgIC8vIGNvbnN0IGNvZGV2aWV3Q29tbWFuZCA9IGNvZGV2aWV3ID8gJ2NvZGV2aWV3LmFjdGl2YXRlJyA6ICdjb2Rldmlldy5kZWFjdGl2YXRlJztcbiAgICAgICAgb3B0aW9ucy5jYWxsYmFja3MgPSB0aGlzLmNhbGxiYWNrcztcblxuICAgICAgICBjb25zdCBkb21Ob2RlID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgdGhpcy5lZGl0b3IgPSAkKGRvbU5vZGUpLmZpbmQoYCMke3RoaXMudWlkfWApO1xuXG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUob3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKGNvZGV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdjb2Rldmlldy5hY3RpdmF0ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG9wdGlvbnMuYWlyTW9kZSkge1xuXG4gICAgICAgICAgICBkb21Ob2RlLnBhcmVudEVsZW1lbnQhLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2ZvY3VzJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYXV0b2ZvY3VzKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdmb2N1cycpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHM6IGFueSkge1xuXG4gICAgICAgIGNvbnN0IHsgcHJvcHMgfSA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgY29kZXZpZXcgPSBuZXh0UHJvcHMuY29kZXZpZXc7XG4gICAgICAgIGNvbnN0IGNvZGV2aWV3Q29tbWFuZCA9IGNvZGV2aWV3ID8gJ2NvZGV2aWV3LmFjdGl2YXRlJyA6ICdjb2Rldmlldy5kZWFjdGl2YXRlJztcblxuICAgICAgICBpZiAodHlwZW9mIG5leHRQcm9wcy52YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZShuZXh0UHJvcHMudmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBuZXh0UHJvcHMuZGlzYWJsZWQgPT09ICdib29sZWFuJyAmJiBwcm9wcy5kaXNhYmxlZCAhPT0gbmV4dFByb3BzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN0YXRlKG5leHRQcm9wcy5kaXNhYmxlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29kZXZpZXcgIT09IHByb3BzLmNvZGV2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKGNvZGV2aWV3Q29tbWFuZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hdXRvZm9jdXMpIHtcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2ZvY3VzJyk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyBzaG91bGRDb21wb25lbnRVcGRhdGUoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVkaXRvci5zdW1tZXJub3RlKSB7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdkZXN0cm95Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb25Jbml0KCkge1xuXG4gICAgICAgIGNvbnN0IHsgZGlzYWJsZWQsIG9uSW5pdCB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBjb25zdCAkY29udGFpbmVyID0gdGhpcy5lZGl0b3IucGFyZW50KCk7XG5cbiAgICAgICAgdGhpcy5ub3RlRWRpdGFibGUgPSAkY29udGFpbmVyLmZpbmQoJy5ub3RlLWVkaXRhYmxlJyk7XG4gICAgICAgIHRoaXMubm90ZVBsYWNlaG9sZGVyID0gJGNvbnRhaW5lci5maW5kKCcubm90ZS1wbGFjZWhvbGRlcicpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgZGlzYWJsZWQgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShkaXNhYmxlZCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIG9uSW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25Jbml0KHtcbiAgICAgICAgICAgICAgICBzdW1tZXJub3RlOiB0aGlzLmVkaXRvci5zdW1tZXJub3RlLmJpbmQodGhpcy5lZGl0b3IpLFxuICAgICAgICAgICAgICAgIGZvY3VzOiB0aGlzLmZvY3VzLFxuICAgICAgICAgICAgICAgIGlzRW1wdHk6IHRoaXMuaXNFbXB0eSxcbiAgICAgICAgICAgICAgICByZXNldDogdGhpcy5yZXNldCxcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0aGlzLnJlcGxhY2UsXG4gICAgICAgICAgICAgICAgZGlzYWJsZTogdGhpcy5kaXNhYmxlLFxuICAgICAgICAgICAgICAgIGVuYWJsZTogdGhpcy5lbmFibGUsXG4gICAgICAgICAgICAgICAgaW5zZXJ0SW1hZ2U6IHRoaXMuaW5zZXJ0SW1hZ2UsXG4gICAgICAgICAgICAgICAgaW5zZXJ0Tm9kZTogdGhpcy5pbnNlcnROb2RlLFxuICAgICAgICAgICAgICAgIGluc2VydFRleHQ6IHRoaXMuaW5zZXJ0VGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb25JbWFnZVVwbG9hZChpbWFnZXM6IGFueSkge1xuXG4gICAgICAgIGNvbnN0IHsgb25JbWFnZVVwbG9hZCB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICBpZiAodHlwZW9mIG9uSW1hZ2VVcGxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIG9uSW1hZ2VVcGxvYWQoaW1hZ2VzLCB0aGlzLmluc2VydEltYWdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnZm9jdXMnKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2lzRW1wdHknKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ3Jlc2V0Jyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlcGxhY2UoY29udGVudDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHsgbm90ZUVkaXRhYmxlLCBub3RlUGxhY2Vob2xkZXIgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHByZXZDb250ZW50ID0gbm90ZUVkaXRhYmxlLmh0bWwoKTtcbiAgICAgICAgY29uc3QgY29udGVudExlbmd0aCA9IGNvbnRlbnQubGVuZ3RoO1xuXG4gICAgICAgIGlmIChwcmV2Q29udGVudCAhPT0gY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSgpICYmIGNvbnRlbnRMZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbm90ZVBsYWNlaG9sZGVyLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29udGVudExlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5vdGVQbGFjZWhvbGRlci5zaG93KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5vdGVFZGl0YWJsZS5odG1sKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGN1cnJlbnRWYWx1ZSgpOiBIVE1MU3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90ZUVkaXRhYmxlLmh0bWwoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlUmFuZ2UoKTogUmFuZ2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnY3JlYXRlUmFuZ2UnKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBkaXNhYmxlKCkge1xuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdkaXNhYmxlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGVuYWJsZSgpIHtcbiAgICAgICAgdGhpcy5lZGl0b3Iuc3VtbWVybm90ZSgnZW5hYmxlJyk7XG4gICAgfVxuXG4gICAgcHVibGljIHRvZ2dsZVN0YXRlKGRpc2FibGVkOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVuYWJsZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGluc2VydEltYWdlKHVybDogYW55LCBmaWxlbmFtZU9yQ2FsbGJhY2s6IGFueSkge1xuICAgICAgICB0aGlzLmVkaXRvci5zdW1tZXJub3RlKCdpbnNlcnRJbWFnZScsIHVybCwgZmlsZW5hbWVPckNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5zZXJ0Tm9kZShub2RlOiBOb2RlKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2luc2VydE5vZGUnLCBub2RlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5zZXJ0VGV4dCh0ZXh0OiBOb2RlKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLnN1bW1lcm5vdGUoJ2luc2VydFRleHQnLCB0ZXh0KTtcbiAgICB9XG5cbiAgICBnZXQgY2FsbGJhY2tzKCkge1xuICAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcHM7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uSW5pdDogdGhpcy5vbkluaXQsXG4gICAgICAgICAgICBvbkVudGVyOiBwcm9wcy5vbkVudGVyLFxuICAgICAgICAgICAgb25Gb2N1czogcHJvcHMub25Gb2N1cyxcbiAgICAgICAgICAgIG9uQmx1cjogcHJvcHMub25CbHVyLFxuICAgICAgICAgICAgb25LZXl1cDogcHJvcHMub25LZXlVcCxcbiAgICAgICAgICAgIG9uS2V5ZG93bjogcHJvcHMub25LZXlEb3duLFxuICAgICAgICAgICAgb25QYXN0ZTogcHJvcHMub25QYXN0ZSxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiBwcm9wcy5vbkNoYW5nZSxcbiAgICAgICAgICAgIG9uSW1hZ2VVcGxvYWQ6IHRoaXMub25JbWFnZVVwbG9hZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHsgdmFsdWUsIGRlZmF1bHRWYWx1ZSwgY2xhc3NOYW1lIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBjb25zdCBodG1sID0gdmFsdWUgfHwgZGVmYXVsdFZhbHVlIHx8IFwiXCI7XG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9e3RoaXMudWlkfSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IGh0bWwgfX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcblxuICAgIHJlYWRvbmx5IG9wdGlvbnM6IGFueTtcbiAgICByZWFkb25seSB2YWx1ZT86IHN0cmluZztcbiAgICByZWFkb25seSBkZWZhdWx0VmFsdWU/OiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgY2xhc3NOYW1lPzogc3RyaW5nO1xuXG4gICAgcmVhZG9ubHkgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGF1dG9mb2N1cz86IGJvb2xlYW47XG5cbiAgICByZWFkb25seSBjb2Rldmlldz86IGFueTtcblxuICAgIHJlYWRvbmx5IG9uRW50ZXI/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25Gb2N1cz86IGFueTtcbiAgICByZWFkb25seSBvbkJsdXI/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25LZXlVcD86IGFueTtcbiAgICByZWFkb25seSBvbktleURvd24/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25QYXN0ZT86IGFueTtcbiAgICByZWFkb25seSBvbkNoYW5nZT86IGFueTtcbiAgICByZWFkb25seSBvbkluaXQ/OiBhbnk7XG4gICAgcmVhZG9ubHkgb25JbWFnZVVwbG9hZD86IGFueTtcblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBvbiB0aGUgY29uc3RydWN0b3Igc28gdGhhdCBjYWxsZXJzIGNhbiBidWlsZCB0aGVpciBvd24gYnV0dG9uc1xuICAgICAqIGFuZCBmdWNudGlvbmFsaXR5IG9uIHRoZSB1bmRlcmx5aW5nIHRleHQgY29tcG9uZW50LlxuICAgICAqL1xuICAgIHJlYWRvbmx5IG9uUmljaFRleHRNdXRhdG9yPzogKG11dGF0b3I6IFJpY2hUZXh0TXV0YXRvcikgPT4gdm9pZDtcblxufVxuXG5cblxuIl19