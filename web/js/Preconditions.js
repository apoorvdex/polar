"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Preconditions {
    static assert(value, testFunction, message) {
        Preconditions.assertNotNull(testFunction, "testFunction");
        const result = testFunction(value);
        if (!result) {
            throw new Error(`Assertion failed for value ${value}: ` + message);
        }
        return value;
    }
    static assertEqual(value, expected, name) {
        if (value !== expected) {
            throw new Error(`Value of ${value} !==- ${expected}`);
        }
        return value;
    }
    static assertNumber(value, name) {
        Preconditions.assertNotNull(value, name);
        if (isNaN(value)) {
            throw new Error(`Precondition failure for ${name}: NaN`);
        }
        Preconditions.assertTypeOf(value, "number", name);
        return value;
    }
    static assertInstanceOf(value, instance, name) {
        Preconditions.assertNotNull(value, name);
        Preconditions.assertNotNull(instance, "instance");
        if (!(value instanceof instance)) {
            throw new Error(`Precondition for instanceof '${name}' was not ${instance.name}.`);
        }
        return value;
    }
    static assertString(value, name) {
        return this.assertTypeOf(value, 'string', name);
    }
    static assertTypeOf(value, type, name) {
        if (typeof value !== type) {
            throw new Error(`Precondition for typeof '${name}' was not ${type} but actually: ` + typeof value);
        }
        return value;
    }
    static assertNotNull(value, name) {
        return Preconditions.assertPresent(value, name);
    }
    static assertPresent(value, name) {
        let msgPrefix = "Precondition argument failed: ";
        if (name) {
            msgPrefix = `Precondition (argument) for '${name}' failed`;
        }
        if (value === null) {
            throw new Error(`${msgPrefix}: null`);
        }
        if (value === undefined) {
            throw new Error(`${msgPrefix}: undefined`);
        }
        return value;
    }
    static assertAbsent(value) {
        if (!isPresent(value)) {
            return;
        }
        if (value instanceof Error) {
            throw value;
        }
        throw new Error("Not absent: " + value);
    }
    static assertNotTypeOf(value, name, type) {
        if (typeof value === type) {
            throw new Error(`Precondition for typeof '${name}' was ${type} but not allowed`);
        }
        return value;
    }
    static assertNotInstanceOf(value, name, instance) {
        if (value instanceof instance) {
            throw new Error(`Precondition for instanceof '${name}' was ${instance} but not allowed`);
        }
        return value;
    }
    static defaultValue(argCurrentValue, argDefaultValue) {
        if (!argCurrentValue) {
            return argDefaultValue;
        }
        return argCurrentValue;
    }
    static isPresent(val) {
        return val !== undefined && val !== null;
    }
}
exports.Preconditions = Preconditions;
function defaultValue(_currentValue, _defaultValue) {
    return Preconditions.defaultValue(_currentValue, _defaultValue);
}
exports.defaultValue = defaultValue;
function notNull(value, name) {
    return Preconditions.assertNotNull(value, name);
}
exports.notNull = notNull;
function isPresent(val) {
    return Preconditions.isPresent(val);
}
exports.isPresent = isPresent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJlY29uZGl0aW9ucy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlByZWNvbmRpdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFhLGFBQWE7SUFVZixNQUFNLENBQUMsTUFBTSxDQUFJLEtBQVEsRUFBRSxZQUFrQyxFQUFFLE9BQWU7UUFFakYsYUFBYSxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFFMUQsTUFBTSxNQUFNLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBRW5DLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDVCxNQUFNLElBQUksS0FBSyxDQUFDLDhCQUE4QixLQUFLLElBQUksR0FBRyxPQUFPLENBQUMsQ0FBQztTQUN0RTtRQUVELE9BQU8sS0FBSyxDQUFDO0lBRWpCLENBQUM7SUFPTSxNQUFNLENBQUMsV0FBVyxDQUFJLEtBQVEsRUFBRSxRQUFXLEVBQUUsSUFBWTtRQUU1RCxJQUFHLEtBQUssS0FBSyxRQUFRLEVBQUU7WUFDbkIsTUFBTSxJQUFJLEtBQUssQ0FBQyxZQUFZLEtBQUssU0FBUyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQ3pEO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFFakIsQ0FBQztJQVFELE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBVSxFQUFFLElBQVk7UUFFeEMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFekMsSUFBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDYixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixJQUFJLE9BQU8sQ0FBQyxDQUFDO1NBQzVEO1FBRUQsYUFBYSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRWxELE9BQU8sS0FBSyxDQUFDO0lBRWpCLENBQUM7SUFTRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsS0FBVSxFQUFFLFFBQWEsRUFB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QUcsS0FBSyxJQUFJLENBQUM7SUFDN0MsQ0FBQztDQUVKO0FBMUxELHNDQTBMQztBQVFELFNBQWdCLFlBQVksQ0FBSSxhQUFnQixFQUFFLGFBQWdCO0lBQzlELE9BQU8sYUFBYSxDQUFDLFlBQVksQ0FBQyxhQUFhLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDcEUsQ0FBQztBQUZELG9DQUVDO0FBRUQsU0FBZ0IsT0FBTyxDQUFJLEtBQWUsRUFBRSxJQUFhO0lBQ3JELE9BQU8sYUFBYSxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQUZELDBCQUVDO0FBRUQsU0FBZ0IsU0FBUyxDQUFDLEdBQVE7SUFDOUIsT0FBTyxhQUFhLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3hDLENBQUM7QUFGRCw4QkFFQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBQcmVjb25kaXRpb25zIHtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlICBUaGUgdmFsdWUgd2UncmUgdHJ5aW5nIHRvIGFzc2VydC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0ZXN0RnVuY3Rpb24gQXNzZXJ0IHRoYXQgdGhlIHRlc3QgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG4gICAgICogQHBhcmFtIG1lc3NhZ2VcbiAgICAgKiBAcmV0dXJuIFJldHVybiB0aGUgdmFsdWUgd2UndmUgYmVlbiBnaXZlbiBvbmNlIGl0J3MgcGFzc2VkIGFzc2VydGlvbnMuXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBhc3NlcnQ8VD4odmFsdWU6IFQsIHRlc3RGdW5jdGlvbjogQXNzZXJ0aW9uRnVuY3Rpb248VD4sIG1lc3NhZ2U6IHN0cmluZyk6IFQge1xuXG4gICAgICAgIFByZWNvbmRpdGlvbnMuYXNzZXJ0Tm90TnVsbCh0ZXN0RnVuY3Rpb24sIFwidGVzdEZ1bmN0aW9uXCIpO1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRlc3RGdW5jdGlvbih2YWx1ZSk7XG5cbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQXNzZXJ0aW9uIGZhaWxlZCBmb3IgdmFsdWUgJHt2YWx1ZX06IGAgKyBtZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2VydCB0aGF0IHRoaXMgdmFsdWUgaXMgZGVmaW5lZCAsIG5vdC1udWxsLCBhbmQgYWxzbyBub3QgTmFOIGFuZCBhbHNvIGFcbiAgICAgKiBudW1iZXIuXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGFzc2VydEVxdWFsPFQ+KHZhbHVlOiBULCBleHBlY3RlZDogVCwgbmFtZTogc3RyaW5nKTogVCB7XG5cbiAgICAgICAgaWYodmFsdWUgIT09IGV4cGVjdGVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZhbHVlIG9mICR7dmFsdWV9ICE9PS0gJHtleHBlY3RlZH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFzc2VydCB0aGF0IHRoaXMgdmFsdWUgaXMgZGVmaW5lZCAsIG5vdC1udWxsLCBhbmQgYWxzbyBub3QgTmFOIGFuZCBhbHNvIGEgbnVtYmVyLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgd2UgZXhwZWN0IHRvIGJlIGEgbnVtYmVyLlxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBudW1iZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NlcnROdW1iZXIodmFsdWU6IGFueSwgbmFtZTogc3RyaW5nKSB7XG5cbiAgICAgICAgUHJlY29uZGl0aW9ucy5hc3NlcnROb3ROdWxsKHZhbHVlLCBuYW1lKTtcblxuICAgICAgICBpZihpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlY29uZGl0aW9uIGZhaWx1cmUgZm9yICR7bmFtZX06IE5hTmApO1xuICAgICAgICB9XG5cbiAgICAgICAgUHJlY29uZGl0aW9ucy5hc3NlcnRUeXBlT2YodmFsdWUsIFwibnVtYmVyXCIsIG5hbWUpO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIHsqfVxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB7Y2xhc3N9XG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NlcnRJbnN0YW5jZU9mKHZhbHVlOiBhbnksIGluc3RhbmNlOiBhbnksIG5hbWU6IHN0cmluZykge1xuXG4gICAgICAgIFByZWNvbmRpdGlvbnMuYXNzZXJ0Tm90TnVsbCh2YWx1ZSwgbmFtZSk7XG4gICAgICAgIFByZWNvbmRpdGlvbnMuYXNzZXJ0Tm90TnVsbChpbnN0YW5jZSwgXCJpbnN0YW5jZVwiKTtcblxuICAgICAgICBpZiAoISAodmFsdWUgaW5zdGFuY2VvZiBpbnN0YW5jZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlY29uZGl0aW9uIGZvciBpbnN0YW5jZW9mICcke25hbWV9JyB3YXMgbm90ICR7aW5zdGFuY2UubmFtZX0uYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGFzc2VydFN0cmluZyh2YWx1ZTogYW55LCBuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRUeXBlT2YodmFsdWUsICdzdHJpbmcnLCBuYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZVxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICogQHBhcmFtIG5hbWVcbiAgICAgKiBAcmV0dXJuIHZhbHVlXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBhc3NlcnRUeXBlT2YodmFsdWU6IGFueSwgdHlwZTogc3RyaW5nLCBuYW1lOiBzdHJpbmcpOiBhbnkge1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IHR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlY29uZGl0aW9uIGZvciB0eXBlb2YgJyR7bmFtZX0nIHdhcyBub3QgJHt0eXBlfSBidXQgYWN0dWFsbHk6IGAgKyB0eXBlb2YgdmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIGFzc2VydFByZXNlbnQgaW5zdGVhZFxuICAgICAqL1xuICAgIHN0YXRpYyBhc3NlcnROb3ROdWxsPFQ+KHZhbHVlOiBUIHwgbnVsbCwgbmFtZT86IHN0cmluZyk6IE5vbk51bGxhYmxlPFQ+IHtcbiAgICAgICAgcmV0dXJuIFByZWNvbmRpdGlvbnMuYXNzZXJ0UHJlc2VudCh2YWx1ZSwgbmFtZSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgc3RhdGljIGFzc2VydFByZXNlbnQ8VD4odmFsdWU6IFQgfCBudWxsLCBuYW1lPzogc3RyaW5nKTogTm9uTnVsbGFibGU8VD4ge1xuXG4gICAgICAgIGxldCBtc2dQcmVmaXggPSBcIlByZWNvbmRpdGlvbiBhcmd1bWVudCBmYWlsZWQ6IFwiO1xuXG4gICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBtc2dQcmVmaXggPSBgUHJlY29uZGl0aW9uIChhcmd1bWVudCkgZm9yICcke25hbWV9JyBmYWlsZWRgO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bXNnUHJlZml4fTogbnVsbGApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHttc2dQcmVmaXh9OiB1bmRlZmluZWRgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZSE7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGFzc2VydEFic2VudDxUPih2YWx1ZTogVCkge1xuXG4gICAgICAgIGlmICghIGlzUHJlc2VudCh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyB2YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBhYnNlbnQ6IFwiICsgdmFsdWUpO1xuXG4gICAgfVxuXG4gICAgc3RhdGljIGFzc2VydE5vdFR5cGVPZjxUPih2YWx1ZTogYW55LCBuYW1lOiBzdHJpbmcsIHR5cGU6IHN0cmluZyk6IFQge1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IHR5cGUgKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByZWNvbmRpdGlvbiBmb3IgdHlwZW9mICcke25hbWV9JyB3YXMgJHt0eXBlfSBidXQgbm90IGFsbG93ZWRgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXNzZXJ0Tm90SW5zdGFuY2VPZjxUPih2YWx1ZTogVCwgbmFtZTogc3RyaW5nLCBpbnN0YW5jZTogYW55KTogVCB7XG5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgaW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlY29uZGl0aW9uIGZvciBpbnN0YW5jZW9mICcke25hbWV9JyB3YXMgJHtpbnN0YW5jZX0gYnV0IG5vdCBhbGxvd2VkYCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVc2UgYSBkZWZhdWx0IHZhbHVlIGlmIG9uZSBpcyBub3Qgc3BlY2lmaWVkLlxuICAgICAqXG4gICAgICpcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRWYWx1ZTxUPihhcmdDdXJyZW50VmFsdWU6IFQsIGFyZ0RlZmF1bHRWYWx1ZTogVCk6IFQge1xuXG4gICAgICAgIGlmKCEgYXJnQ3VycmVudFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJnRGVmYXVsdFZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFyZ0N1cnJlbnRWYWx1ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBwcmVzZW50LiBOb3QgdW5kZWZpbmVkIGFuZCBub3QgbnVsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWxcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGlzUHJlc2VudCh2YWw6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgJiYgdmFsICE9PSBudWxsO1xuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgQXNzZXJ0aW9uRnVuY3Rpb248VD4ge1xuICAgICh2YWw6IFQpOiBib29sZWFuO1xufVxuXG5cbi8vIG5vaW5zcGVjdGlvbiBUc0xpbnQ6IHZhcmlhYmxlLW5hbWVcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0VmFsdWU8VD4oX2N1cnJlbnRWYWx1ZTogVCwgX2RlZmF1bHRWYWx1ZTogVCk6IFQge1xuICAgIHJldHVybiBQcmVjb25kaXRpb25zLmRlZmF1bHRWYWx1ZShfY3VycmVudFZhbHVlLCBfZGVmYXVsdFZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vdE51bGw8VD4odmFsdWU6IFQgfCBudWxsLCBuYW1lPzogc3RyaW5nKTogTm9uTnVsbGFibGU8VD4ge1xuICAgIHJldHVybiBQcmVjb25kaXRpb25zLmFzc2VydE5vdE51bGwodmFsdWUsIG5hbWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcmVzZW50KHZhbDogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFByZWNvbmRpdGlvbnMuaXNQcmVzZW50KHZhbCk7XG59XG5cbiJdfQ==