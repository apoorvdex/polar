"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const electron_1 = require("electron");
const Logger_1 = require("../logger/Logger");
const Broadcasters_1 = require("./Broadcasters");
const BrowserWindowReference_1 = require("../ui/dialog_window/BrowserWindowReference");
const log = Logger_1.Logger.create();
class Broadcaster {
    constructor(inputChannel, outputChannel = inputChannel) {
        this.channel = inputChannel;
        electron_1.ipcMain.on(inputChannel, (event, arg) => {
            log.info("Forwarding message: ", inputChannel, event);
            const senderBrowserWindowReference = new BrowserWindowReference_1.BrowserWindowReference(electron_1.BrowserWindow.fromWebContents(event.sender).id);
            Broadcasters_1.Broadcasters.send(outputChannel, arg, senderBrowserWindowReference);
        });
    }
}
exports.Broadcaster = Broadcaster;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnJvYWRjYXN0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJCcm9hZGNhc3Rlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVDQUFnRDtBQUNoRCw2Q0FBd0M7QUFDeEMsaURBQTRDO0FBQzVDLHVGQUFrRjtBQUVsRixNQUFNLEdBQUcsR0FBRyxlQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFRNUIsTUFBYSxXQUFXO0lBU3BCLFlBQVksWUFBb0IsRUFBRSxnQkFBd0IsWUFBWTtRQUVsRSxJQUFJLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQztRQUc1QixrQkFBTyxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxLQUFxQixFQUFFLEdBQVEsRUFBRSxFQUFFO1lBRXpELEdBQUcsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUcsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBRXZELE1BQU0sNEJBQTRCLEdBQzVCLElBQUksK0NBQXNCLENBQUMsd0JBQWEsQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRWpGLDJCQUFZLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUUsNEJBQTRCLENBQUMsQ0FBQztRQUV4RSxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FFSjtBQTNCRCxrQ0EyQkMiLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB7QnJvd3NlcldpbmRvdywgaXBjTWFpbn0gZnJvbSAnZWxlY3Ryb24nO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uL2xvZ2dlci9Mb2dnZXInO1xuaW1wb3J0IHtCcm9hZGNhc3RlcnN9IGZyb20gJy4vQnJvYWRjYXN0ZXJzJztcbmltcG9ydCB7QnJvd3NlcldpbmRvd1JlZmVyZW5jZX0gZnJvbSAnLi4vdWkvZGlhbG9nX3dpbmRvdy9Ccm93c2VyV2luZG93UmVmZXJlbmNlJztcblxuY29uc3QgbG9nID0gTG9nZ2VyLmNyZWF0ZSgpO1xuXG4vKipcbiAqIFdoZW4gd2UgcmVjZWl2ZSBhIG1lc3NhZ2UsIHdlIGJyb2FkY2FzdCBpdCB0byBhbGwgdGhlIHJlbmRlcmVycy4gIEFueW9uZSBub3RcbiAqIGxpc3RlbmluZyBqdXN0IGRyb3BzIHRoZSBtZXNzYWdlLiAgVGhpcyBtYWtlcyBpdCBlYXN5IHRvIGltcGxlbWVudCB2YXJpb3VzXG4gKiBmb3JtcyBvZiBtZXNzYWdlIGNvbW11bmljYXRpb24gYnV0IG9uZSBvZiB0aGVtIGlzIHNoYXJlZCBzdGF0ZSBhY3Jvc3MgdGhlXG4gKiB3ZWIgYnJvd3NlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCcm9hZGNhc3RlciB7XG5cbiAgICBwcml2YXRlIGNoYW5uZWw6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGlucHV0Q2hhbm5lbCBUaGUgY2hhbm5lbCBvZiB0aGUgZXZlbnQgd2UncmUgbGlzdGVuaW5nIHRvIGZvciBuZXcgbWVzc2FnZVxuICAgICAqIEBwYXJhbSBvdXRwdXRDaGFubmVsIFRoZSBjaGFubmVsIHRvIHJlLXNlbmQgdGhlIGV2ZW50IG9uIHRvIG90aGVyIHJlbmRlcmVyIHByb2Nlc3Nlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihpbnB1dENoYW5uZWw6IHN0cmluZywgb3V0cHV0Q2hhbm5lbDogc3RyaW5nID0gaW5wdXRDaGFubmVsKSB7XG5cbiAgICAgICAgdGhpcy5jaGFubmVsID0gaW5wdXRDaGFubmVsO1xuXG4gICAgICAgIC8vIFRPRE86IHJlcXVpcmUgdGhhdCB0aGlzIGlzIHJlZ2lzdGVyZWQgdmlhIHN0YXJ0IChub3QgYXV0b21hdGljYWxseSkuXG4gICAgICAgIGlwY01haW4ub24oaW5wdXRDaGFubmVsLCAoZXZlbnQ6IEVsZWN0cm9uLkV2ZW50LCBhcmc6IGFueSkgPT4ge1xuXG4gICAgICAgICAgICBsb2cuaW5mbyhcIkZvcndhcmRpbmcgbWVzc2FnZTogXCIgLCBpbnB1dENoYW5uZWwsIGV2ZW50KTtcblxuICAgICAgICAgICAgY29uc3Qgc2VuZGVyQnJvd3NlcldpbmRvd1JlZmVyZW5jZVxuICAgICAgICAgICAgICAgID0gbmV3IEJyb3dzZXJXaW5kb3dSZWZlcmVuY2UoQnJvd3NlcldpbmRvdy5mcm9tV2ViQ29udGVudHMoZXZlbnQuc2VuZGVyKS5pZCk7XG5cbiAgICAgICAgICAgIEJyb2FkY2FzdGVycy5zZW5kKG91dHB1dENoYW5uZWwsIGFyZywgc2VuZGVyQnJvd3NlcldpbmRvd1JlZmVyZW5jZSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn1cbiJdfQ==