"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const electron_1 = require("electron");
const Pipe_1 = require("./Pipe");
class ElectronRenderToRendererPipe extends Pipe_1.Pipe {
    constructor(windowReference) {
        super();
        this.windowReference = windowReference;
    }
    on(channel, listener) {
        electron_1.ipcRenderer.on(channel, (event, message) => {
            listener(new Pipe_1.PipeNotification(channel, event, message));
        });
    }
    once(channel, listener) {
        electron_1.ipcRenderer.once(channel, (event, message) => {
            listener(new Pipe_1.PipeNotification(channel, event, message));
        });
    }
    write(channel, message) {
        electron_1.ipcRenderer.sendTo(this.windowReference.id, channel, message);
    }
}
exports.ElectronRenderToRendererPipe = ElectronRenderToRendererPipe;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWxlY3Ryb25SZW5kZXJUb1JlbmRlcmVyUGlwZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkVsZWN0cm9uUmVuZGVyVG9SZW5kZXJlclBpcGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBcUM7QUFDckMsaUNBQTREO0FBTTVELE1BQWEsNEJBQTZCLFNBQVEsV0FBeUI7SUFJdkUsWUFBWSxlQUF1QztRQUMvQyxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO0lBQzNDLENBQUM7SUFFTSxFQUFFLENBQUMsT0FBZSxFQUFFLFFBQTJDO1FBQ2xFLHNCQUFXLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQXFCLEVBQUUsT0FBWSxFQUFFLEVBQUU7WUFDNUQsUUFBUSxDQUFDLElBQUksdUJBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVNLElBQUksQ0FBQyxPQUFlLEVBQUUsUUFBMkM7UUFDcEUsc0JBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBcUIsRUFBRSxPQUFZLEVBQUUsRUFBRTtZQUM5RCxRQUFRLENBQUMsSUFBSSx1QkFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDNUQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sS0FBSyxDQUFDLE9BQWUsRUFBRSxPQUFZO1FBQ3RDLHNCQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNsRSxDQUFDO0NBRUo7QUF6QkQsb0VBeUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpcGNSZW5kZXJlcn0gZnJvbSAnZWxlY3Ryb24nO1xuaW1wb3J0IHtQaXBlLCBQaXBlTGlzdGVuZXIsIFBpcGVOb3RpZmljYXRpb259IGZyb20gJy4vUGlwZSc7XG5pbXBvcnQge0Jyb3dzZXJXaW5kb3dSZWZlcmVuY2V9IGZyb20gJy4uLy4uL3VpL2RpYWxvZ193aW5kb3cvQnJvd3NlcldpbmRvd1JlZmVyZW5jZSc7XG5cbi8qKlxuICogUGlwZSB0aGF0IGNvbW11bmljYXRlcyB0byBCcm93c2VyV2luZG93IGRpcmVjdGx5IGluc3RlYWQgb2YgdGhlIG1haW4gcHJvY2Vzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEVsZWN0cm9uUmVuZGVyVG9SZW5kZXJlclBpcGUgZXh0ZW5kcyBQaXBlPEVsZWN0cm9uLkV2ZW50LCBhbnk+IHtcblxuICAgIHB1YmxpYyByZWFkb25seSB3aW5kb3dSZWZlcmVuY2U6IEJyb3dzZXJXaW5kb3dSZWZlcmVuY2U7XG5cbiAgICBjb25zdHJ1Y3Rvcih3aW5kb3dSZWZlcmVuY2U6IEJyb3dzZXJXaW5kb3dSZWZlcmVuY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy53aW5kb3dSZWZlcmVuY2UgPSB3aW5kb3dSZWZlcmVuY2U7XG4gICAgfVxuXG4gICAgcHVibGljIG9uKGNoYW5uZWw6IHN0cmluZywgbGlzdGVuZXI6IFBpcGVMaXN0ZW5lcjxFbGVjdHJvbi5FdmVudCwgYW55Pik6IHZvaWQge1xuICAgICAgICBpcGNSZW5kZXJlci5vbihjaGFubmVsLCAoZXZlbnQ6IEVsZWN0cm9uLkV2ZW50LCBtZXNzYWdlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGxpc3RlbmVyKG5ldyBQaXBlTm90aWZpY2F0aW9uKGNoYW5uZWwsIGV2ZW50LCBtZXNzYWdlKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbmNlKGNoYW5uZWw6IHN0cmluZywgbGlzdGVuZXI6IFBpcGVMaXN0ZW5lcjxFbGVjdHJvbi5FdmVudCwgYW55Pik6IHZvaWQge1xuICAgICAgICBpcGNSZW5kZXJlci5vbmNlKGNoYW5uZWwsIChldmVudDogRWxlY3Ryb24uRXZlbnQsIG1lc3NhZ2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIobmV3IFBpcGVOb3RpZmljYXRpb24oY2hhbm5lbCwgZXZlbnQsIG1lc3NhZ2UpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHdyaXRlKGNoYW5uZWw6IHN0cmluZywgbWVzc2FnZTogYW55KTogdm9pZCB7XG4gICAgICAgIGlwY1JlbmRlcmVyLnNlbmRUbyh0aGlzLndpbmRvd1JlZmVyZW5jZS5pZCwgY2hhbm5lbCwgbWVzc2FnZSk7XG4gICAgfVxuXG59XG4iXX0=