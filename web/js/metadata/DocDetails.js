"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Preconditions_1 = require("../Preconditions");
const Logger_1 = require("../logger/Logger");
const log = Logger_1.Logger.create();
class DocDetails {
    static merge(docInfo, docDetail) {
        if (docDetail !== undefined) {
            log.debug("Merging docDetail: ", docDetail);
            const targetDocDetails = docInfo;
            const typedKeys = ['title', 'subtitle', 'description', 'url', 'filename'];
            const sourceDocDetails = docDetail;
            typedKeys.forEach(typedKey => {
                if (!Preconditions_1.isPresent(targetDocDetails[typedKey]) && Preconditions_1.isPresent(sourceDocDetails[typedKey])) {
                    const newValue = sourceDocDetails[typedKey];
                    log.debug(`Setting ${typedKey} to ${newValue}`);
                    targetDocDetails[typedKey] = newValue;
                }
            });
            return targetDocDetails;
        }
        else {
            log.warn("No docDetail to merge");
        }
        return undefined;
    }
}
exports.DocDetails = DocDetails;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRG9jRGV0YWlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkRvY0RldGFpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxvREFBMkM7QUFDM0MsNkNBQXdDO0FBR3hDLE1BQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUU1QixNQUFhLFVBQVU7SUFFWixNQUFNLENBQUMsS0FBSyxDQUFDLE9BQWdCLEVBQUUsU0FBcUI7UUFJdkQsSUFBSSxTQUFTLEtBQUssU0FBUyxFQUFFO1lBRXpCLEdBQUcsQ0FBQyxLQUFLLENBQUMscUJBQXFCLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFFNUMsTUFBTSxnQkFBZ0IsR0FBd0IsT0FBTyxDQUFDO1lBRXRELE1BQU0sU0FBUyxHQUNULENBQUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBRTlELE1BQU0sZ0JBQWdCLEdBQXdCLFNBQVMsQ0FBQztZQUV4RCxTQUFTLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO2dCQUV6QixJQUFJLENBQUUseUJBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLHlCQUFTLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRTtvQkFDbEYsTUFBTSxRQUFRLEdBQUcsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7b0JBQzVDLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxRQUFRLE9BQU8sUUFBUSxFQUFFLENBQUMsQ0FBQztvQkFDaEQsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLEdBQUcsUUFBUSxDQUFDO2lCQUN6QztZQUVMLENBQUMsQ0FBQyxDQUFDO1lBRUgsT0FBTyxnQkFBZ0IsQ0FBQztTQUUzQjthQUFNO1lBQ0gsR0FBRyxDQUFDLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1NBQ3JDO1FBRUQsT0FBTyxTQUFTLENBQUM7SUFFckIsQ0FBQztDQUNKO0FBcENELGdDQW9DQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RG9jRGV0YWlsLCBVcGRhdGFibGVEb2NEZXRhaWxzfSBmcm9tICcuL0RvY0RldGFpbCc7XG5pbXBvcnQge2lzUHJlc2VudH0gZnJvbSAnLi4vUHJlY29uZGl0aW9ucyc7XG5pbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vbG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQge0RvY0luZm99IGZyb20gJy4vRG9jSW5mbyc7XG5cbmNvbnN0IGxvZyA9IExvZ2dlci5jcmVhdGUoKTtcblxuZXhwb3J0IGNsYXNzIERvY0RldGFpbHMge1xuXG4gICAgcHVibGljIHN0YXRpYyBtZXJnZShkb2NJbmZvOiBEb2NJbmZvLCBkb2NEZXRhaWw/OiBEb2NEZXRhaWwpOiBVcGRhdGFibGVEb2NEZXRhaWxzIHwgdW5kZWZpbmVkIHtcblxuICAgICAgICAvLyB3ZSBiYXNpY2FsbHkgbm93IG5lZWQgdG8gJ2dpZnQnIGFkZGl0aW9uYWwgZmllbGRzIHRvIHRoZSBkb2MgbW9kZWxcbiAgICAgICAgLy8gaGVyZSBpbmNsdWRpbmcgdGl0bGUsIGZpbGVuYW1lLCBldGMuXG4gICAgICAgIGlmIChkb2NEZXRhaWwgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgICAgICAgICBsb2cuZGVidWcoXCJNZXJnaW5nIGRvY0RldGFpbDogXCIsIGRvY0RldGFpbCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHRhcmdldERvY0RldGFpbHM6IFVwZGF0YWJsZURvY0RldGFpbHMgPSBkb2NJbmZvO1xuXG4gICAgICAgICAgICBjb25zdCB0eXBlZEtleXM6IEFycmF5PGtleW9mIFVwZGF0YWJsZURvY0RldGFpbHM+XG4gICAgICAgICAgICAgICAgPSBbJ3RpdGxlJywgJ3N1YnRpdGxlJywgJ2Rlc2NyaXB0aW9uJywgJ3VybCcsICdmaWxlbmFtZSddO1xuXG4gICAgICAgICAgICBjb25zdCBzb3VyY2VEb2NEZXRhaWxzOiBVcGRhdGFibGVEb2NEZXRhaWxzID0gZG9jRGV0YWlsO1xuXG4gICAgICAgICAgICB0eXBlZEtleXMuZm9yRWFjaCh0eXBlZEtleSA9PiB7XG5cbiAgICAgICAgICAgICAgICBpZiAoISBpc1ByZXNlbnQodGFyZ2V0RG9jRGV0YWlsc1t0eXBlZEtleV0pICYmIGlzUHJlc2VudChzb3VyY2VEb2NEZXRhaWxzW3R5cGVkS2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBzb3VyY2VEb2NEZXRhaWxzW3R5cGVkS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgbG9nLmRlYnVnKGBTZXR0aW5nICR7dHlwZWRLZXl9IHRvICR7bmV3VmFsdWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldERvY0RldGFpbHNbdHlwZWRLZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRhcmdldERvY0RldGFpbHM7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvZy53YXJuKFwiTm8gZG9jRGV0YWlsIHRvIG1lcmdlXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgIH1cbn1cbiJdfQ==