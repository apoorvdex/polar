"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Assertions_1 = require("../test/Assertions");
const DocMetas_1 = require("./DocMetas");
const TestingTime_1 = require("../test/TestingTime");
const Statistics_1 = require("./Statistics");
describe('Statistics', function () {
    describe('computeDocumentsAddedRate', function () {
        it("basic", function () {
            TestingTime_1.TestingTime.freeze();
            const docInfos = [];
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x001').docInfo);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x002').docInfo);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x003').docInfo);
            TestingTime_1.TestingTime.forward(24 * 60 * 60 * 1000);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x004').docInfo);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x005').docInfo);
            TestingTime_1.TestingTime.forward(24 * 60 * 60 * 1000);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x006').docInfo);
            docInfos.push(DocMetas_1.MockDocMetas.createMockDocMeta('0x007').docInfo);
            const dateStats = Statistics_1.Statistics.computeDocumentsAddedRate(docInfos);
            Assertions_1.assertJSON(dateStats, [
                {
                    "date": "2012-03-02",
                    "value": 3
                },
                {
                    "date": "2012-03-03",
                    "value": 2
                },
                {
                    "date": "2012-03-04",
                    "value": 2
                }
            ]);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RhdGlzdGljc1Rlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJTdGF0aXN0aWNzVGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLG1EQUE4QztBQUc5Qyx5Q0FBd0M7QUFDeEMscURBQWdEO0FBQ2hELDZDQUF3QztBQUV4QyxRQUFRLENBQUMsWUFBWSxFQUFFO0lBRW5CLFFBQVEsQ0FBQywyQkFBMkIsRUFBRTtRQUVsQyxFQUFFLENBQUMsT0FBTyxFQUFFO1lBRVIseUJBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUVyQixNQUFNLFFBQVEsR0FBRyxFQUFFLENBQUM7WUFFcEIsUUFBUSxDQUFDLElBQUksQ0FBQyx1QkFBWSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQy9ELFFBQVEsQ0FBQyxJQUFJLENBQUMsdUJBQVksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMvRCxRQUFRLENBQUMsSUFBSSxDQUFDLHVCQUFZLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7WUFFL0QseUJBQVcsQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDekMsUUFBUSxDQUFDLElBQUksQ0FBQyx1QkFBWSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQy9ELFFBQVEsQ0FBQyxJQUFJLENBQUMsdUJBQVksQ0FBQyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUUvRCx5QkFBVyxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLHVCQUFZLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDL0QsUUFBUSxDQUFDLElBQUksQ0FBQyx1QkFBWSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRS9ELE1BQU0sU0FBUyxHQUFHLHVCQUFVLENBQUMseUJBQXlCLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFakUsdUJBQVUsQ0FBQyxTQUFTLEVBQUU7Z0JBQ2xCO29CQUNJLE1BQU0sRUFBRSxZQUFZO29CQUNwQixPQUFPLEVBQUUsQ0FBQztpQkFDYjtnQkFDRDtvQkFDSSxNQUFNLEVBQUUsWUFBWTtvQkFDcEIsT0FBTyxFQUFFLENBQUM7aUJBQ2I7Z0JBQ0Q7b0JBQ0ksTUFBTSxFQUFFLFlBQVk7b0JBQ3BCLE9BQU8sRUFBRSxDQUFDO2lCQUNiO2FBQ0osQ0FBQyxDQUFDO1FBRVAsQ0FBQyxDQUFDLENBQUM7SUFFUCxDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHthc3NlcnR9IGZyb20gJ2NoYWknO1xuaW1wb3J0IHthc3NlcnRKU09OfSBmcm9tICcuLi90ZXN0L0Fzc2VydGlvbnMnO1xuaW1wb3J0IHtQYWdlbWFya1JlY3RzfSBmcm9tICcuL1BhZ2VtYXJrUmVjdHMnO1xuaW1wb3J0IHtSZWN0c30gZnJvbSAnLi4vUmVjdHMnO1xuaW1wb3J0IHtNb2NrRG9jTWV0YXN9IGZyb20gJy4vRG9jTWV0YXMnO1xuaW1wb3J0IHtUZXN0aW5nVGltZX0gZnJvbSAnLi4vdGVzdC9UZXN0aW5nVGltZSc7XG5pbXBvcnQge1N0YXRpc3RpY3N9IGZyb20gJy4vU3RhdGlzdGljcyc7XG5cbmRlc2NyaWJlKCdTdGF0aXN0aWNzJywgZnVuY3Rpb24oKSB7XG5cbiAgICBkZXNjcmliZSgnY29tcHV0ZURvY3VtZW50c0FkZGVkUmF0ZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIGl0KFwiYmFzaWNcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIFRlc3RpbmdUaW1lLmZyZWV6ZSgpO1xuXG4gICAgICAgICAgICBjb25zdCBkb2NJbmZvcyA9IFtdO1xuXG4gICAgICAgICAgICBkb2NJbmZvcy5wdXNoKE1vY2tEb2NNZXRhcy5jcmVhdGVNb2NrRG9jTWV0YSgnMHgwMDEnKS5kb2NJbmZvKTtcbiAgICAgICAgICAgIGRvY0luZm9zLnB1c2goTW9ja0RvY01ldGFzLmNyZWF0ZU1vY2tEb2NNZXRhKCcweDAwMicpLmRvY0luZm8pO1xuICAgICAgICAgICAgZG9jSW5mb3MucHVzaChNb2NrRG9jTWV0YXMuY3JlYXRlTW9ja0RvY01ldGEoJzB4MDAzJykuZG9jSW5mbyk7XG5cbiAgICAgICAgICAgIFRlc3RpbmdUaW1lLmZvcndhcmQoMjQgKiA2MCAqIDYwICogMTAwMCk7XG4gICAgICAgICAgICBkb2NJbmZvcy5wdXNoKE1vY2tEb2NNZXRhcy5jcmVhdGVNb2NrRG9jTWV0YSgnMHgwMDQnKS5kb2NJbmZvKTtcbiAgICAgICAgICAgIGRvY0luZm9zLnB1c2goTW9ja0RvY01ldGFzLmNyZWF0ZU1vY2tEb2NNZXRhKCcweDAwNScpLmRvY0luZm8pO1xuXG4gICAgICAgICAgICBUZXN0aW5nVGltZS5mb3J3YXJkKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuICAgICAgICAgICAgZG9jSW5mb3MucHVzaChNb2NrRG9jTWV0YXMuY3JlYXRlTW9ja0RvY01ldGEoJzB4MDA2JykuZG9jSW5mbyk7XG4gICAgICAgICAgICBkb2NJbmZvcy5wdXNoKE1vY2tEb2NNZXRhcy5jcmVhdGVNb2NrRG9jTWV0YSgnMHgwMDcnKS5kb2NJbmZvKTtcblxuICAgICAgICAgICAgY29uc3QgZGF0ZVN0YXRzID0gU3RhdGlzdGljcy5jb21wdXRlRG9jdW1lbnRzQWRkZWRSYXRlKGRvY0luZm9zKTtcblxuICAgICAgICAgICAgYXNzZXJ0SlNPTihkYXRlU3RhdHMsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiOiBcIjIwMTItMDMtMDJcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAzXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiOiBcIjIwMTItMDMtMDNcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIFwiZGF0ZVwiOiBcIjIwMTItMDMtMDRcIixcbiAgICAgICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiAyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxufSk7XG4iXX0=