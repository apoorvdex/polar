"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Logger_1 = require("../../logger/Logger");
const Elements_1 = require("../../util/Elements");
const Preconditions_1 = require("../../Preconditions");
const Strings_1 = require("../../util/Strings");
const log = Logger_1.Logger.create();
class ProgressLog {
    constructor() {
    }
    update(progressEvent) {
        log.info("Got progress update: ", progressEvent.percentage);
        this.updateProgress(progressEvent);
        this.updateLogView(progressEvent);
    }
    updateProgress(progressEvent) {
        let progressElement = document.querySelector("progress");
        progressElement.value = progressEvent.percentage;
    }
    updateLogView(progressEvent) {
        if (Strings_1.Strings.empty(progressEvent.message)) {
            return;
        }
        let logElement = Preconditions_1.notNull(document.querySelector(".log"));
        let lineElement = Elements_1.Elements.createWrapperElementHTML(`<div class="">${progressEvent.message}</div>`);
        logElement.appendChild(lineElement);
    }
}
exports.ProgressLog = ProgressLog;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZ3Jlc3NMb2cuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJQcm9ncmVzc0xvZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGdEQUEyQztBQUMzQyxrREFBNkM7QUFDN0MsdURBQTRDO0FBRTVDLGdEQUEyQztBQUUzQyxNQUFNLEdBQUcsR0FBRyxlQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFPNUIsTUFBYSxXQUFXO0lBRXBCO0lBRUEsQ0FBQztJQU1ELE1BQU0sQ0FBQyxhQUE0QjtRQUUvQixHQUFHLENBQUMsSUFBSSxDQUFDLHVCQUF1QixFQUFFLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUU1RCxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFdEMsQ0FBQztJQUVPLGNBQWMsQ0FBQyxhQUE0QjtRQUUvQyxJQUFJLGVBQWUsR0FBd0IsUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5RSxlQUFlLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxVQUFVLENBQUM7SUFFckQsQ0FBQztJQUVPLGFBQWEsQ0FBQyxhQUE0QjtRQUU5QyxJQUFHLGlCQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUNyQyxPQUFPO1NBQ1Y7UUFFRCxJQUFJLFVBQVUsR0FBRyx1QkFBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUV6RCxJQUFJLFdBQVcsR0FBRyxtQkFBUSxDQUFDLHdCQUF3QixDQUFDLGlCQUFpQixhQUFhLENBQUMsT0FBTyxRQUFRLENBQUMsQ0FBQztRQUVwRyxVQUFVLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBRXhDLENBQUM7Q0FFSjtBQXhDRCxrQ0F3Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0xvZ2dlcn0gZnJvbSAnLi4vLi4vbG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQge0VsZW1lbnRzfSBmcm9tICcuLi8uLi91dGlsL0VsZW1lbnRzJztcbmltcG9ydCB7bm90TnVsbH0gZnJvbSAnLi4vLi4vUHJlY29uZGl0aW9ucyc7XG5pbXBvcnQge1Byb2dyZXNzRXZlbnR9IGZyb20gJy4vUHJvZ3Jlc3NFdmVudCc7XG5pbXBvcnQge1N0cmluZ3N9IGZyb20gJy4uLy4uL3V0aWwvU3RyaW5ncyc7XG5cbmNvbnN0IGxvZyA9IExvZ2dlci5jcmVhdGUoKTtcblxuLyoqXG4gKiBBIFByb2dyZXNzTG9nIGtlZXBzIGFsbG93cyB1cyB0byB1cGRhdGUgYSBsb2cgbGluZSBkaXNwbGF5IGFuZCBhIHByb2dyZXNzXG4gKiBiYXIgd2hpbGUgYSBwcm9jZXNzIGlzIG1vdmluZyBmb3J3YXJkLiAgVXNlZCB2aWEgc3luYywgY2FwdHVyZSwgYW5kIG90aGVyXG4gKiBmdXR1cmUgc2VydmljZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9ncmVzc0xvZyB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCB3aGVuIHdlIHNob3VsZCB1cGRhdGUgdGhlIHByb2dyZXNzIG9mIG91ciBhcHAgYXMgaXQgbW92ZXMgZm9yd2FyZFxuICAgICAqIGFuZCBjb21wbGV0ZXMgd29yay5cbiAgICAgKi9cbiAgICB1cGRhdGUocHJvZ3Jlc3NFdmVudDogUHJvZ3Jlc3NFdmVudCkge1xuXG4gICAgICAgIGxvZy5pbmZvKFwiR290IHByb2dyZXNzIHVwZGF0ZTogXCIsIHByb2dyZXNzRXZlbnQucGVyY2VudGFnZSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVQcm9ncmVzcyhwcm9ncmVzc0V2ZW50KTtcbiAgICAgICAgdGhpcy51cGRhdGVMb2dWaWV3KHByb2dyZXNzRXZlbnQpO1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVQcm9ncmVzcyhwcm9ncmVzc0V2ZW50OiBQcm9ncmVzc0V2ZW50KSB7XG5cbiAgICAgICAgbGV0IHByb2dyZXNzRWxlbWVudCA9IDxIVE1MUHJvZ3Jlc3NFbGVtZW50PmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwcm9ncmVzc1wiKTtcbiAgICAgICAgcHJvZ3Jlc3NFbGVtZW50LnZhbHVlID0gcHJvZ3Jlc3NFdmVudC5wZXJjZW50YWdlO1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVMb2dWaWV3KHByb2dyZXNzRXZlbnQ6IFByb2dyZXNzRXZlbnQpIHtcblxuICAgICAgICBpZihTdHJpbmdzLmVtcHR5KHByb2dyZXNzRXZlbnQubWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsb2dFbGVtZW50ID0gbm90TnVsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvZ1wiKSk7XG5cbiAgICAgICAgbGV0IGxpbmVFbGVtZW50ID0gRWxlbWVudHMuY3JlYXRlV3JhcHBlckVsZW1lbnRIVE1MKGA8ZGl2IGNsYXNzPVwiXCI+JHtwcm9ncmVzc0V2ZW50Lm1lc3NhZ2V9PC9kaXY+YCk7XG5cbiAgICAgICAgbG9nRWxlbWVudC5hcHBlbmRDaGlsZChsaW5lRWxlbWVudCk7XG5cbiAgICB9XG5cbn1cblxuIl19