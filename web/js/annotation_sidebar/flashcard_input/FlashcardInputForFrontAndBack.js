"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const React = __importStar(require("react"));
const Logger_1 = require("../../logger/Logger");
const FlashcardType_1 = require("../../metadata/FlashcardType");
const FlashcardButtons_1 = require("./FlashcardButtons");
const FlashcardTypeSelector_1 = require("./FlashcardTypeSelector");
const RichTextArea_1 = require("../RichTextArea");
const FlashcardInput_1 = require("./FlashcardInput");
const log = Logger_1.Logger.create();
class FlashcardInputForFrontAndBack extends React.Component {
    constructor(props, context) {
        super(props, context);
        this.flashcardType = FlashcardType_1.FlashcardType.BASIC_FRONT_BACK;
        this.fields = { front: "", back: "" };
        this.onCreate = this.onCreate.bind(this);
        this.onCancel = this.onCancel.bind(this);
        this.state = {
            iter: 0,
        };
    }
    render() {
        const { id } = this.props;
        return (React.createElement("div", { id: "annotation-flashcard-box", className: "" },
            React.createElement(RichTextArea_1.RichTextArea, { label: "front", id: `front-${this.props.id}`, autofocus: true, onKeyDown: event => this.onKeyDown(event), onChange: (html) => this.fields.front = html }),
            React.createElement(RichTextArea_1.RichTextArea, { label: "back", id: `back-${this.props.id}`, onKeyDown: event => this.onKeyDown(event), onChange: (html) => this.fields.back = html }),
            React.createElement("div", { style: FlashcardInput_1.Styles.BottomBar },
                React.createElement("div", { style: FlashcardInput_1.Styles.BottomBarItem },
                    React.createElement(FlashcardTypeSelector_1.FlashcardTypeSelector, { flashcardType: this.flashcardType, onChangeFlashcardType: flashcardType => this.props.onFlashcardChangeType(flashcardType) })),
                React.createElement("div", { style: FlashcardInput_1.Styles.BottomBarItemRight, className: "text-right" },
                    React.createElement(FlashcardButtons_1.FlashcardButtons, { onCancel: () => this.onCancel(), onCreate: () => this.onCreate() })))));
    }
    onKeyDown(event) {
        if (event.getModifierState("Control") && event.key === "Enter") {
            this.onCreate();
        }
    }
    onCreate() {
        if (this.props.onFlashcardCreated) {
            this.props.onFlashcardCreated(this.flashcardType, this.fields);
        }
        this.reset();
        this.setState({
            iter: this.state.iter + 1
        });
    }
    onCancel() {
        if (this.props.onCancel) {
            this.props.onCancel();
        }
        this.reset();
    }
    reset() {
        this.fields = { front: "", back: "" };
    }
}
exports.FlashcardInputForFrontAndBack = FlashcardInputForFrontAndBack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxhc2hjYXJkSW5wdXRGb3JGcm9udEFuZEJhY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJGbGFzaGNhcmRJbnB1dEZvckZyb250QW5kQmFjay50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsNkNBQStCO0FBQy9CLGdEQUEyQztBQUUzQyxnRUFBMkQ7QUFDM0QseURBQW9EO0FBQ3BELG1FQUE4RDtBQUM5RCxrREFBNkM7QUFHN0MscURBQW1HO0FBRW5HLE1BQU0sR0FBRyxHQUFHLGVBQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUU1QixNQUFhLDZCQUE4QixTQUFRLEtBQUssQ0FBQyxTQUF5QjtJQU05RSxZQUFZLEtBQWEsRUFBRSxPQUFZO1FBQ25DLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFMVCxrQkFBYSxHQUFrQiw2QkFBYSxDQUFDLGdCQUFnQixDQUFDO1FBRXZFLFdBQU0sR0FBdUIsRUFBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUMsQ0FBQztRQUt2RCxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekMsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULElBQUksRUFBRSxDQUFDO1NBQ1YsQ0FBQztJQUVOLENBQUM7SUFFTSxNQUFNO1FBRVQsTUFBTSxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFFMUIsT0FBTyxDQUVILDZCQUFLLEVBQUUsRUFBQywwQkFBMEIsRUFBQyxTQUFTLEVBQUMsRUFBRTtZQUczQyxvQkFBQywyQkFBWSxJQUFDLEtBQUssRUFBQyxPQUFPLEVBQ2IsRUFBRSxFQUFFLFNBQVMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFDNUIsU0FBUyxFQUFFLElBQUksRUFDZixTQUFTLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUN6QyxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksR0FDeEQ7WUFFRixvQkFBQywyQkFBWSxJQUFDLEtBQUssRUFBQyxNQUFNLEVBQ1osRUFBRSxFQUFFLFFBQVEsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFDM0IsU0FBUyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFDekMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxJQUFJLEdBQ3ZEO1lBSUYsNkJBQUssS0FBSyxFQUFFLHVCQUFNLENBQUMsU0FBUztnQkFFeEIsNkJBQUssS0FBSyxFQUFFLHVCQUFNLENBQUMsYUFBYTtvQkFFNUIsb0JBQUMsNkNBQXFCLElBQ2xCLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUNqQyxxQkFBcUIsRUFBRSxhQUFhLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FFNUY7Z0JBRU4sNkJBQUssS0FBSyxFQUFFLHVCQUFNLENBQUMsa0JBQWtCLEVBQ2hDLFNBQVMsRUFBQyxZQUFZO29CQUV2QixvQkFBQyxtQ0FBZ0IsSUFBQyxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxFQUMvQixRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBRWxELENBRUosQ0FFSixDQUVULENBQUM7SUFFTixDQUFDO0lBR08sU0FBUyxDQUFDLEtBQW9CO1FBRWxDLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxHQUFHLEtBQUssT0FBTyxFQUFFO1lBQzVELElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUNuQjtJQUVMLENBQUM7SUFFTyxRQUFRO1FBRVosSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGtCQUFrQixFQUFFO1lBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDbEU7UUFFRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFYixJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ1YsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUM7U0FDNUIsQ0FBQyxDQUFDO0lBRVAsQ0FBQztJQUVPLFFBQVE7UUFFWixJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFO1lBQ3JCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDekI7UUFFRCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFFakIsQ0FBQztJQUVPLEtBQUs7UUFDVCxJQUFJLENBQUMsTUFBTSxHQUFHLEVBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFDLENBQUM7SUFDeEMsQ0FBQztDQUdKO0FBMUdELHNFQTBHQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi8uLi9sb2dnZXIvTG9nZ2VyJztcbmltcG9ydCBCdXR0b24gZnJvbSAncmVhY3RzdHJhcC9saWIvQnV0dG9uJztcbmltcG9ydCB7Rmxhc2hjYXJkVHlwZX0gZnJvbSAnLi4vLi4vbWV0YWRhdGEvRmxhc2hjYXJkVHlwZSc7XG5pbXBvcnQge0ZsYXNoY2FyZEJ1dHRvbnN9IGZyb20gJy4vRmxhc2hjYXJkQnV0dG9ucyc7XG5pbXBvcnQge0ZsYXNoY2FyZFR5cGVTZWxlY3Rvcn0gZnJvbSAnLi9GbGFzaGNhcmRUeXBlU2VsZWN0b3InO1xuaW1wb3J0IHtSaWNoVGV4dEFyZWF9IGZyb20gJy4uL1JpY2hUZXh0QXJlYSc7XG5pbXBvcnQge1JpY2hUZXh0TXV0YXRvcn0gZnJvbSAnLi4vLi4vYXBwcy9jYXJkX2NyZWF0b3IvZWxlbWVudHMvc2NoZW1hZm9ybS9SaWNoVGV4dE11dGF0b3InO1xuaW1wb3J0IHtFbGVtZW50c30gZnJvbSAnLi4vLi4vdXRpbC9FbGVtZW50cyc7XG5pbXBvcnQge0ZsYXNoY2FyZElucHV0RmllbGRzVHlwZSwgU3R5bGVzLCBDbG96ZUZpZWxkcywgRnJvbnRBbmRCYWNrRmllbGRzfSBmcm9tICcuL0ZsYXNoY2FyZElucHV0JztcblxuY29uc3QgbG9nID0gTG9nZ2VyLmNyZWF0ZSgpO1xuXG5leHBvcnQgY2xhc3MgRmxhc2hjYXJkSW5wdXRGb3JGcm9udEFuZEJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcblxuICAgIHByaXZhdGUgcmVhZG9ubHkgZmxhc2hjYXJkVHlwZTogRmxhc2hjYXJkVHlwZSA9IEZsYXNoY2FyZFR5cGUuQkFTSUNfRlJPTlRfQkFDSztcblxuICAgIHByaXZhdGUgZmllbGRzOiBGcm9udEFuZEJhY2tGaWVsZHMgPSB7ZnJvbnQ6IFwiXCIsIGJhY2s6IFwiXCJ9O1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IElQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuICAgICAgICB0aGlzLm9uQ3JlYXRlID0gdGhpcy5vbkNyZWF0ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9uQ2FuY2VsID0gdGhpcy5vbkNhbmNlbC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBpdGVyOiAwLFxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcblxuICAgICAgICBjb25zdCB7IGlkIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIHJldHVybiAoXG5cbiAgICAgICAgICAgIDxkaXYgaWQ9XCJhbm5vdGF0aW9uLWZsYXNoY2FyZC1ib3hcIiBjbGFzc05hbWU9XCJcIj5cblxuXG4gICAgICAgICAgICAgICAgPFJpY2hUZXh0QXJlYSBsYWJlbD1cImZyb250XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXtgZnJvbnQtJHt0aGlzLnByb3BzLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRvZm9jdXM9e3RydWV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e2V2ZW50ID0+IHRoaXMub25LZXlEb3duKGV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoaHRtbCkgPT4gdGhpcy5maWVsZHMuZnJvbnQgPSBodG1sfVxuICAgICAgICAgICAgICAgIC8+XG5cbiAgICAgICAgICAgICAgICA8UmljaFRleHRBcmVhIGxhYmVsPVwiYmFja1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZD17YGJhY2stJHt0aGlzLnByb3BzLmlkfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktleURvd249e2V2ZW50ID0+IHRoaXMub25LZXlEb3duKGV2ZW50KX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoaHRtbCkgPT4gdGhpcy5maWVsZHMuYmFjayA9IGh0bWx9XG4gICAgICAgICAgICAgICAgLz5cblxuICAgICAgICAgICAgICAgIHsvKi0gcXVvdGUgYW5ub3RhdGlvbiAuLi4gdG8gY29weSB0aGUgYW5ub3RhdGlvbiB0ZXh0LiovfVxuXG4gICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17U3R5bGVzLkJvdHRvbUJhcn0+XG5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17U3R5bGVzLkJvdHRvbUJhckl0ZW19PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rmxhc2hjYXJkVHlwZVNlbGVjdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhc2hjYXJkVHlwZT17dGhpcy5mbGFzaGNhcmRUeXBlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlRmxhc2hjYXJkVHlwZT17Zmxhc2hjYXJkVHlwZSA9PiB0aGlzLnByb3BzLm9uRmxhc2hjYXJkQ2hhbmdlVHlwZShmbGFzaGNhcmRUeXBlKX0vPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e1N0eWxlcy5Cb3R0b21CYXJJdGVtUmlnaHR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8Rmxhc2hjYXJkQnV0dG9ucyBvbkNhbmNlbD17KCkgPT4gdGhpcy5vbkNhbmNlbCgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DcmVhdGU9eygpID0+IHRoaXMub25DcmVhdGUoKX0vPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICk7XG5cbiAgICB9XG5cblxuICAgIHByaXZhdGUgb25LZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG5cbiAgICAgICAgaWYgKGV2ZW50LmdldE1vZGlmaWVyU3RhdGUoXCJDb250cm9sXCIpICYmIGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ3JlYXRlKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHByaXZhdGUgb25DcmVhdGUoKTogdm9pZCB7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25GbGFzaGNhcmRDcmVhdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uRmxhc2hjYXJkQ3JlYXRlZCh0aGlzLmZsYXNoY2FyZFR5cGUsIHRoaXMuZmllbGRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVzZXQoKTtcblxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGl0ZXI6IHRoaXMuc3RhdGUuaXRlciArIDFcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIG9uQ2FuY2VsKCk6IHZvaWQge1xuXG4gICAgICAgIGlmICh0aGlzLnByb3BzLm9uQ2FuY2VsKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uQ2FuY2VsKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc2V0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHtmcm9udDogXCJcIiwgYmFjazogXCJcIn07XG4gICAgfVxuXG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJUHJvcHMge1xuICAgIHJlYWRvbmx5IGlkOiBzdHJpbmc7XG4gICAgcmVhZG9ubHkgb25GbGFzaGNhcmRDcmVhdGVkOiAoZmxhc2hjYXJkVHlwZTogRmxhc2hjYXJkVHlwZSwgZmllbGRzOiBSZWFkb25seTxGbGFzaGNhcmRJbnB1dEZpZWxkc1R5cGU+KSA9PiB2b2lkO1xuICAgIHJlYWRvbmx5IG9uRmxhc2hjYXJkQ2hhbmdlVHlwZTogKGZsYXNoY2FyZFR5cGU6IEZsYXNoY2FyZFR5cGUpID0+IHZvaWQ7XG4gICAgcmVhZG9ubHkgb25DYW5jZWw/OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgcmVhZG9ubHkgaXRlcjogbnVtYmVyO1xufVxuXG5cbiJdfQ==