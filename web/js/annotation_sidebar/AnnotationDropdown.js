"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const React = __importStar(require("react"));
const reactstrap_1 = require("reactstrap");
const ConfirmPopover_1 = require("../../../web/js/ui/confirm/ConfirmPopover");
const Logger_1 = require("../../../web/js/logger/Logger");
const log = Logger_1.Logger.create();
const Styles = {
    DropdownMenu: {
        zIndex: 999,
        fontSize: '14px'
    },
};
class AnnotationDropdown extends React.Component {
    constructor(props, context) {
        super(props, context);
        this.open = false;
        this.selected = 'none';
        this.toggle = this.toggle.bind(this);
        this.select = this.select.bind(this);
        this.onDelete = this.onDelete.bind(this);
        this.onCreateComment = this.onCreateComment.bind(this);
        this.onCreateFlashcard = this.onCreateFlashcard.bind(this);
        this.onJumpToContext = this.onJumpToContext.bind(this);
        this.state = {
            open: this.open,
            selected: this.selected,
        };
    }
    render() {
        const toggleID = this.props.id + '-dropdown-toggle';
        return (React.createElement("div", { className: "text-right" },
            React.createElement(reactstrap_1.Dropdown, { id: this.props.id, isOpen: this.state.open, toggle: this.toggle },
                React.createElement(reactstrap_1.DropdownToggle, { color: "light", className: "doc-dropdown-button btn text-muted pl-1 pr-1", id: toggleID },
                    React.createElement("i", { className: "fas fa-ellipsis-h" })),
                React.createElement(reactstrap_1.DropdownMenu, { right: true },
                    React.createElement(reactstrap_1.DropdownItem, { onClick: () => this.onCreateComment() }, "Create comment"),
                    React.createElement(reactstrap_1.DropdownItem, { onClick: () => this.onCreateFlashcard() }, "Create flashcard"),
                    React.createElement(reactstrap_1.DropdownItem, { onClick: () => this.onJumpToContext() }, "Jump to context"),
                    React.createElement(reactstrap_1.DropdownItem, { divider: true }),
                    React.createElement(reactstrap_1.DropdownItem, { className: "text-danger", onClick: () => this.onDeleteSelected() }, "Delete"))),
            React.createElement(ConfirmPopover_1.ConfirmPopover, { open: this.state.selected === 'delete', target: toggleID, title: "Are you sure you want to delete this annotation? ", subtitle: "This will also delete all associated comments and flashcards.", onCancel: () => this.select('none'), onConfirm: () => this.onDelete() })));
    }
    onDeleteSelected() {
        this.select('delete');
    }
    onCreateComment() {
        this.select('none');
        this.props.onCreateComment(this.props.annotation);
    }
    onCreateFlashcard() {
        this.select('none');
        this.props.onCreateFlashcard(this.props.annotation);
    }
    onJumpToContext() {
        this.select('none');
        this.props.onJumpToContext(this.props.annotation);
    }
    onDelete() {
        this.select('none');
        this.props.onDelete(this.props.annotation);
    }
    toggle() {
        this.open = !this.state.open;
        this.refresh();
    }
    select(selected) {
        this.selected = selected;
        this.refresh();
    }
    refresh() {
        this.setState({
            open: this.open,
            selected: this.selected
        });
    }
}
exports.AnnotationDropdown = AnnotationDropdown;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW5ub3RhdGlvbkRyb3Bkb3duLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQW5ub3RhdGlvbkRyb3Bkb3duLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSw2Q0FBK0I7QUFDL0IsMkNBQXlGO0FBQ3pGLDhFQUF5RTtBQUV6RSwwREFBcUQ7QUFJckQsTUFBTSxHQUFHLEdBQUcsZUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRTVCLE1BQU0sTUFBTSxHQUFjO0lBRXRCLFlBQVksRUFBRTtRQUNWLE1BQU0sRUFBRSxHQUFHO1FBQ1gsUUFBUSxFQUFFLE1BQU07S0FDbkI7Q0FFSixDQUFDO0FBRUYsTUFBYSxrQkFBbUIsU0FBUSxLQUFLLENBQUMsU0FBeUI7SUFLbkUsWUFBWSxLQUFhLEVBQUUsT0FBWTtRQUNuQyxLQUFLLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBSmxCLFNBQUksR0FBWSxLQUFLLENBQUM7UUFDdEIsYUFBUSxHQUFtQixNQUFNLENBQUM7UUFLdEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2RCxJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FB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LENBQUMsSUFBSSxDQUFDO1FBRTlCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUVuQixDQUFDO0lBRU8sTUFBTSxDQUFDLFFBQXdCO1FBQ25DLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBRU8sT0FBTztRQUVYLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDWixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7WUFDZixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7U0FDMUIsQ0FBQyxDQUFDO0lBRUwsQ0FBQztDQUVKO0FBN0hELGdEQTZIQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7RHJvcGRvd24sIERyb3Bkb3duSXRlbSwgRHJvcGRvd25NZW51LCBEcm9wZG93blRvZ2dsZSwgVG9vbHRpcH0gZnJvbSAncmVhY3RzdHJhcCc7XG5pbXBvcnQge0NvbmZpcm1Qb3BvdmVyfSBmcm9tICcuLi8uLi8uLi93ZWIvanMvdWkvY29uZmlybS9Db25maXJtUG9wb3Zlcic7XG5pbXBvcnQge1RleHRJbnB1dFBvcG92ZXJ9IGZyb20gJy4uLy4uLy4uL3dlYi9qcy91aS90ZXh0X2lucHV0L1RleHRJbnB1dFBvcG92ZXInO1xuaW1wb3J0IHtMb2dnZXJ9IGZyb20gJy4uLy4uLy4uL3dlYi9qcy9sb2dnZXIvTG9nZ2VyJztcbmltcG9ydCB7SVN0eWxlTWFwfSBmcm9tICcuLi8uLi8uLi93ZWIvanMvcmVhY3QvSVN0eWxlTWFwJztcbmltcG9ydCB7RG9jQW5ub3RhdGlvbn0gZnJvbSAnLi9Eb2NBbm5vdGF0aW9uJztcblxuY29uc3QgbG9nID0gTG9nZ2VyLmNyZWF0ZSgpO1xuXG5jb25zdCBTdHlsZXM6IElTdHlsZU1hcCA9IHtcblxuICAgIERyb3Bkb3duTWVudToge1xuICAgICAgICB6SW5kZXg6IDk5OSxcbiAgICAgICAgZm9udFNpemU6ICcxNHB4J1xuICAgIH0sXG5cbn07XG5cbmV4cG9ydCBjbGFzcyBBbm5vdGF0aW9uRHJvcGRvd24gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcblxuICAgIHByaXZhdGUgb3BlbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgc2VsZWN0ZWQ6IFNlbGVjdGVkT3B0aW9uID0gJ25vbmUnO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IElQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuICAgICAgICB0aGlzLnRvZ2dsZSA9IHRoaXMudG9nZ2xlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gdGhpcy5zZWxlY3QuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5vbkRlbGV0ZSA9IHRoaXMub25EZWxldGUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLm9uQ3JlYXRlQ29tbWVudCA9IHRoaXMub25DcmVhdGVDb21tZW50LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25DcmVhdGVGbGFzaGNhcmQgPSB0aGlzLm9uQ3JlYXRlRmxhc2hjYXJkLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub25KdW1wVG9Db250ZXh0ID0gdGhpcy5vbkp1bXBUb0NvbnRleHQuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgb3BlbjogdGhpcy5vcGVuLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWQsXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCkge1xuXG4gICAgICAgIGNvbnN0IHRvZ2dsZUlEID0gdGhpcy5wcm9wcy5pZCArICctZHJvcGRvd24tdG9nZ2xlJztcblxuICAgICAgICByZXR1cm4gKFxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtcmlnaHRcIj5cblxuICAgICAgICAgICAgICAgIDxEcm9wZG93biBpZD17dGhpcy5wcm9wcy5pZH0gaXNPcGVuPXt0aGlzLnN0YXRlLm9wZW59IHRvZ2dsZT17dGhpcy50b2dnbGV9PlxuXG4gICAgICAgICAgICAgICAgICAgIDxEcm9wZG93blRvZ2dsZSBjb2xvcj1cImxpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImRvYy1kcm9wZG93bi1idXR0b24gYnRuIHRleHQtbXV0ZWQgcGwtMSBwci0xXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPXt0b2dnbGVJRH0+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImZhcyBmYS1lbGxpcHNpcy1oXCI+PC9pPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25Ub2dnbGU+XG5cbiAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duTWVudSByaWdodD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duSXRlbSBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uQ3JlYXRlQ29tbWVudCgpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgY29tbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9Ecm9wZG93bkl0ZW0+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEcm9wZG93bkl0ZW0gb25DbGljaz17KCkgPT4gdGhpcy5vbkNyZWF0ZUZsYXNoY2FyZCgpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVhdGUgZmxhc2hjYXJkXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duSXRlbT5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duSXRlbSBvbkNsaWNrPXsoKSA9PiB0aGlzLm9uSnVtcFRvQ29udGV4dCgpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBKdW1wIHRvIGNvbnRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25JdGVtPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8RHJvcGRvd25JdGVtIGRpdmlkZXIgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPERyb3Bkb3duSXRlbSBjbGFzc05hbWU9XCJ0ZXh0LWRhbmdlclwiIG9uQ2xpY2s9eygpID0+IHRoaXMub25EZWxldGVTZWxlY3RlZCgpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWxldGVcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25JdGVtPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvRHJvcGRvd25NZW51PlxuXG5cbiAgICAgICAgICAgICAgICA8L0Ryb3Bkb3duPlxuXG4gICAgICAgICAgICAgICAgPENvbmZpcm1Qb3BvdmVyIG9wZW49e3RoaXMuc3RhdGUuc2VsZWN0ZWQgPT09ICdkZWxldGUnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9e3RvZ2dsZUlEfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT1cIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBhbm5vdGF0aW9uPyBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJ0aXRsZT1cIlRoaXMgd2lsbCBhbHNvIGRlbGV0ZSBhbGwgYXNzb2NpYXRlZCBjb21tZW50cyBhbmQgZmxhc2hjYXJkcy5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17KCkgPT4gdGhpcy5zZWxlY3QoJ25vbmUnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Db25maXJtPXsoKSA9PiB0aGlzLm9uRGVsZXRlKCl9Lz5cblxuICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgKTtcblxuICAgIH1cblxuICAgIHByaXZhdGUgb25EZWxldGVTZWxlY3RlZCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3QoJ2RlbGV0ZScpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25DcmVhdGVDb21tZW50KCkge1xuICAgICAgICB0aGlzLnNlbGVjdCgnbm9uZScpO1xuICAgICAgICB0aGlzLnByb3BzLm9uQ3JlYXRlQ29tbWVudCh0aGlzLnByb3BzLmFubm90YXRpb24pO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25DcmVhdGVGbGFzaGNhcmQoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0KCdub25lJyk7XG4gICAgICAgIHRoaXMucHJvcHMub25DcmVhdGVGbGFzaGNhcmQodGhpcy5wcm9wcy5hbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uSnVtcFRvQ29udGV4dCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3QoJ25vbmUnKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkp1bXBUb0NvbnRleHQodGhpcy5wcm9wcy5hbm5vdGF0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uRGVsZXRlKCkge1xuICAgICAgICB0aGlzLnNlbGVjdCgnbm9uZScpO1xuICAgICAgICB0aGlzLnByb3BzLm9uRGVsZXRlKHRoaXMucHJvcHMuYW5ub3RhdGlvbik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0b2dnbGUoKSB7XG5cbiAgICAgICAgdGhpcy5vcGVuID0gISB0aGlzLnN0YXRlLm9wZW47XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHNlbGVjdChzZWxlY3RlZDogU2VsZWN0ZWRPcHRpb24pIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkO1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZnJlc2goKSB7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgb3BlbjogdGhpcy5vcGVuLFxuICAgICAgICAgIHNlbGVjdGVkOiB0aGlzLnNlbGVjdGVkXG4gICAgICB9KTtcblxuICAgIH1cblxufVxuXG5pbnRlcmZhY2UgSVByb3BzIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGFubm90YXRpb246IERvY0Fubm90YXRpb247XG4gICAgb25EZWxldGU6IChhbm5vdGF0aW9uOiBEb2NBbm5vdGF0aW9uKSA9PiB2b2lkO1xuICAgIG9uSnVtcFRvQ29udGV4dDogKGFubm90YXRpb246IERvY0Fubm90YXRpb24pID0+IHZvaWQ7XG4gICAgb25DcmVhdGVDb21tZW50OiAoYW5ub3RhdGlvbjogRG9jQW5ub3RhdGlvbikgPT4gdm9pZDtcbiAgICBvbkNyZWF0ZUZsYXNoY2FyZDogKGFubm90YXRpb246IERvY0Fubm90YXRpb24pID0+IHZvaWQ7XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuXG4gICAgb3BlbjogYm9vbGVhbjtcbiAgICBzZWxlY3RlZDogU2VsZWN0ZWRPcHRpb247XG5cbn1cblxudHlwZSBTZWxlY3RlZE9wdGlvbiA9ICdkZWxldGUnIHwgJ25vbmUnO1xuXG4iXX0=