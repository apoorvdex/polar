"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class AdBlocker {
    static cleanse(contentDoc, url) {
        return {
            amp: this.removeElements('amp-ad', contentDoc)
        };
    }
    static removeElements(selector, contentDoc) {
        const result = new DomMutations();
        contentDoc.querySelectorAll(selector).forEach((element) => {
            if (element.parentElement) {
                element.parentElement.removeChild(element);
                ++result.elementsRemoved;
            }
        });
        return Object.freeze(result);
    }
}
exports.AdBlocker = AdBlocker;
class DomMutations {
    constructor() {
        this.elementsRemoved = 0;
    }
}
exports.DomMutations = DomMutations;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWRCbG9ja2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQWRCbG9ja2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBR0EsTUFBYSxTQUFTO0lBRVgsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFvQixFQUFFLEdBQVc7UUFFbkQsT0FBTztZQUNILEdBQUcsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxVQUFVLENBQUM7U0FDakQsQ0FBQztJQUVOLENBQUM7SUFLTyxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQWdCLEVBQUUsVUFBb0I7UUFFaEUsTUFBTSxNQUFNLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUVsQyxVQUFVLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFFdEQsSUFBSSxPQUFPLENBQUMsYUFBYSxFQUFFO2dCQUN2QixPQUFPLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDM0MsRUFBRSxNQUFNLENBQUMsZUFBZSxDQUFDO2FBQzVCO1FBRUwsQ0FBQyxDQUFDLENBQUM7UUFFSCxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFakMsQ0FBQztDQUVKO0FBOUJELDhCQThCQztBQVVELE1BQWEsWUFBWTtJQUF6QjtRQUNXLG9CQUFlLEdBQVcsQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7Q0FBQTtBQUZELG9DQUVDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZCBibG9jayBzdXBwb3J0LlxuICovXG5leHBvcnQgY2xhc3MgQWRCbG9ja2VyIHtcblxuICAgIHB1YmxpYyBzdGF0aWMgY2xlYW5zZShjb250ZW50RG9jOiBEb2N1bWVudCwgdXJsOiBzdHJpbmcpOiBBZEJsb2NrUmVzdWx0IHtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYW1wOiB0aGlzLnJlbW92ZUVsZW1lbnRzKCdhbXAtYWQnLCBjb250ZW50RG9jKVxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGVsZW1lbnRzIG1hdGNoaW5nIGEgc2ltcGxlIHNlbGVjdG9yLlxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHJlbW92ZUVsZW1lbnRzKHNlbGVjdG9yOiBzdHJpbmcsIGNvbnRlbnREb2M6IERvY3VtZW50KTogUmVhZG9ubHk8SURvbU11dGF0aW9ucz4ge1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBEb21NdXRhdGlvbnMoKTtcblxuICAgICAgICBjb250ZW50RG9jLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICArK3Jlc3VsdC5lbGVtZW50c1JlbW92ZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUocmVzdWx0KTtcblxuICAgIH1cblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkQmxvY2tSZXN1bHQge1xuICAgIHJlYWRvbmx5IGFtcDogSURvbU11dGF0aW9ucztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRG9tTXV0YXRpb25zIHtcbiAgICBlbGVtZW50c1JlbW92ZWQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIERvbU11dGF0aW9ucyBpbXBsZW1lbnRzIElEb21NdXRhdGlvbnMge1xuICAgIHB1YmxpYyBlbGVtZW50c1JlbW92ZWQ6IG51bWJlciA9IDA7XG59XG5cbiJdfQ==