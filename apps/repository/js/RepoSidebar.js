"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const React = __importStar(require("react"));
const Logger_1 = require("../../../web/js/logger/Logger");
const Blackout_1 = require("../../../web/js/ui/blackout/Blackout");
const NavLogo_1 = require("./nav/NavLogo");
const RepoSidebarItem_1 = require("./sidebar/RepoSidebarItem");
const SimpleTooltip_1 = require("../../../web/js/ui/tooltip/SimpleTooltip");
const GDPRNotice_1 = require("../../../web/js/ui/gdpr/GDPRNotice");
const Button_1 = __importDefault(require("reactstrap/lib/Button"));
const ListGroup_1 = __importDefault(require("reactstrap/lib/ListGroup"));
const log = Logger_1.Logger.create();
const Styles = {
    sidebar: {
        position: 'absolute',
        top: 0,
        left: 0,
        backgroundColor: '#fff',
        zIndex: 99999,
        height: 'calc(100%)',
        width: '200px',
        paddingLeft: '1px',
        paddingTop: '1px'
    },
    subheader: {
        display: 'table'
    },
    subheaderItem: {}
};
class RepoSidebar extends React.Component {
    constructor(props, context) {
        super(props, context);
        this.state = {
            expanded: false
        };
        window.addEventListener('keyup', event => {
            if (event.key === "Escape") {
                if (this.state.expanded) {
                    this.setState({ expanded: false });
                }
            }
        });
    }
    componentDidUpdate(prevProps, prevState, snapshot) {
        if (prevState.expanded !== this.state.expanded) {
            Blackout_1.Blackout.toggle(this.state.expanded);
        }
    }
    render() {
        const display = this.state.expanded ? 'block' : 'none';
        const sidebarStyle = Object.assign({}, Styles.sidebar, { display });
        const NavButtons = () => (React.createElement("div", { style: { display: 'flex' } },
            React.createElement("div", { id: "toggle-sidebar", className: "mr-1", style: { marginTop: 'auto', marginBottom: 'auto' } },
                React.createElement(Button_1.default, { color: 'light', onClick: () => this.toggle() },
                    React.createElement("i", { className: "fas fa-bars" }))),
            React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "toggle-sidebar" }, "Toggle showing the sidebar"),
            React.createElement("div", { style: { marginTop: 'auto', marginBottom: 'auto' } },
                React.createElement(NavLogo_1.NavLogo, null))));
        return (React.createElement("div", { className: "repo-sidebar" },
            React.createElement(GDPRNotice_1.GDPRNotice, null),
            React.createElement("div", null,
                React.createElement(NavButtons, null)),
            React.createElement("section", { className: "sidebar", style: sidebarStyle, "data-expanded": this.state.expanded, onKeyUp: event => this.onKeyUp(event) },
                React.createElement("div", { className: "subheader p-1", style: Styles.subheader },
                    React.createElement(NavButtons, null)),
                React.createElement(ListGroup_1.default, { flush: true },
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-documents", href: "#", onClick: () => this.toggle(), iconClassName: "fas fa-archive", text: "Documents" }),
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-annotations", href: "#annotations", onClick: () => this.toggle(), iconClassName: "fas fa-layer-group", text: "Annotations" }),
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-stats", href: "#stats", onClick: () => this.toggle(), iconClassName: "fas fa-chart-line", text: "Statistics" }),
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-logs", href: "#logs", onClick: () => this.toggle(), iconClassName: "fas fa-info-circle", text: "Logs" }),
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-community", href: "#community", onClick: () => this.toggle(), iconClassName: "fas fa-hands-helping", text: "Community" }),
                    React.createElement(RepoSidebarItem_1.RepoSidebarItem, { id: "sidebar-item-whatsnew", href: "#whats-new", onClick: () => this.toggle(), iconClassName: "fas fa-bullhorn", text: "Whats New" })),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-documents", show: 0, placement: "right" }, "Manage all documents you're reading including filtering and sorting."),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-annotations", show: 0, placement: "right" }, "Manage all annotations of all your documents in one central view."),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-stats", show: 0, placement: "right" }, "Show stats on your usage of Polar including stats on tags, rate of document addition, etc."),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-logs", show: 0, placement: "right" }, "Show logs on internal activity during background operations like cloud activity and sync."),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-community", show: 0, placement: "right" }, "Find community resources including links to discussions around Polar."),
                React.createElement(SimpleTooltip_1.SimpleTooltip, { target: "sidebar-item-whatsnew", show: 0, placement: "right" }, "Find out what's new with each Polar release."))));
    }
    onKeyUp(event) {
    }
    toggle() {
        const expanded = !this.state.expanded;
        Blackout_1.Blackout.toggle(expanded);
        this.setState({
            expanded
        });
    }
}
exports.RepoSidebar = RepoSidebar;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVwb1NpZGViYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJSZXBvU2lkZWJhci50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUEsNkNBQStCO0FBQy9CLDBEQUFxRDtBQUVyRCxtRUFBOEQ7QUFDOUQsMkNBQXNDO0FBQ3RDLCtEQUEwRDtBQUMxRCw0RUFBdUU7QUFDdkUsbUVBQThEO0FBQzlELG1FQUEyQztBQUMzQyx5RUFBaUQ7QUFFakQsTUFBTSxHQUFHLEdBQUcsZUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRTVCLE1BQU0sTUFBTSxHQUFjO0lBRXRCLE9BQU8sRUFBRTtRQUNMLFFBQVEsRUFBRSxVQUFVO1FBQ3BCLEdBQUcsRUFBRSxDQUFDO1FBQ04sSUFBSSxFQUFFLENBQUM7UUFFUCxlQUFlLEVBQUUsTUFBTTtRQUN2QixNQUFNLEVBQUUsS0FBSztRQUNiLE1BQU0sRUFBRSxZQUFZO1FBQ3BCLEtBQUssRUFBRSxPQUFPO1FBQ2QsV0FBVyxFQUFFLEtBQUs7UUFDbEIsVUFBVSxFQUFFLEtBQUs7S0FDcEI7SUFFRCxTQUFTLEVBQUU7UUFDUCxPQUFPLEVBQUUsT0FBTztLQUNuQjtJQUVELGFBQWEsRUFBRSxFQUNkO0NBRUosQ0FBQztBQUtGLE1BQWEsV0FBWSxTQUFRLEtBQUssQ0FBQyxTQUF5QjtJQUU1RCxZQUFZLEtBQWEsRUFBRSxPQUFZO1FBQ25DLEtBQUssQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFdEIsSUFBSSxDQUFDLEtBQUssR0FBRztZQUNULFFBQVEsRUFBRSxLQUFLO1NBQ2xCLENBQUM7UUFFRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxFQUFFO1lBRXJDLElBQUksS0FBSyxDQUFDLEdBQUcsS0FBSyxRQUFRLEVBQUU7Z0JBRXhCLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7b0JBQ3JCLElBQUksQ0FBQyxRQUFRLENBQUMs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NEVBSWhCO2dCQUVoQixvQkFBQyw2QkFBYSxJQUFDLE1BQU0sRUFBQyx1QkFBdUIsRUFDOUIsSUFBSSxFQUFFLENBQUMsRUFDUCxTQUFTLEVBQUMsT0FBTyxtREFJaEIsQ0FFVixDQUNSLENBRVQsQ0FBQztJQUVOLENBQUM7SUFFTyxPQUFPLENBQUMsS0FBdUM7SUFJdkQsQ0FBQztJQUVPLE1BQU07UUFFVixNQUFNLFFBQVEsR0FBRyxDQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDO1FBRXZDLG1CQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRTFCLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDVixRQUFRO1NBQ1gsQ0FBQyxDQUFDO0lBS1AsQ0FBQztDQUVKO0FBOU1ELGtDQThNQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7TG9nZ2VyfSBmcm9tICcuLi8uLi8uLi93ZWIvanMvbG9nZ2VyL0xvZ2dlcic7XG5pbXBvcnQge0lTdHlsZU1hcH0gZnJvbSAnLi4vLi4vLi4vd2ViL2pzL3JlYWN0L0lTdHlsZU1hcCc7XG5pbXBvcnQge0JsYWNrb3V0fSBmcm9tICcuLi8uLi8uLi93ZWIvanMvdWkvYmxhY2tvdXQvQmxhY2tvdXQnO1xuaW1wb3J0IHtOYXZMb2dvfSBmcm9tICcuL25hdi9OYXZMb2dvJztcbmltcG9ydCB7UmVwb1NpZGViYXJJdGVtfSBmcm9tICcuL3NpZGViYXIvUmVwb1NpZGViYXJJdGVtJztcbmltcG9ydCB7U2ltcGxlVG9vbHRpcH0gZnJvbSAnLi4vLi4vLi4vd2ViL2pzL3VpL3Rvb2x0aXAvU2ltcGxlVG9vbHRpcCc7XG5pbXBvcnQge0dEUFJOb3RpY2V9IGZyb20gJy4uLy4uLy4uL3dlYi9qcy91aS9nZHByL0dEUFJOb3RpY2UnO1xuaW1wb3J0IEJ1dHRvbiBmcm9tICdyZWFjdHN0cmFwL2xpYi9CdXR0b24nO1xuaW1wb3J0IExpc3RHcm91cCBmcm9tICdyZWFjdHN0cmFwL2xpYi9MaXN0R3JvdXAnO1xuXG5jb25zdCBsb2cgPSBMb2dnZXIuY3JlYXRlKCk7XG5cbmNvbnN0IFN0eWxlczogSVN0eWxlTWFwID0ge1xuXG4gICAgc2lkZWJhcjoge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAvLyBkaXNwbGF5OiAnbm9uZScsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLFxuICAgICAgICB6SW5kZXg6IDk5OTk5LFxuICAgICAgICBoZWlnaHQ6ICdjYWxjKDEwMCUpJyxcbiAgICAgICAgd2lkdGg6ICcyMDBweCcsXG4gICAgICAgIHBhZGRpbmdMZWZ0OiAnMXB4JyxcbiAgICAgICAgcGFkZGluZ1RvcDogJzFweCdcbiAgICB9LFxuXG4gICAgc3ViaGVhZGVyOiB7XG4gICAgICAgIGRpc3BsYXk6ICd0YWJsZSdcbiAgICB9LFxuXG4gICAgc3ViaGVhZGVySXRlbToge1xuICAgIH1cblxufTtcblxuLyoqXG4gKiBTaW1wbGUgaGVhZGVyIGZvciB0aGUgcmVwb3NpdG9yeSB3aGljaCBzdXBwb3J0cyBhcmJpdHJhcnkgY2hpbGRyZW4uXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXBvU2lkZWJhciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IElQcm9wcywgY29udGV4dDogYW55KSB7XG4gICAgICAgIHN1cGVyKHByb3BzLCBjb250ZXh0KTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgZXhwYW5kZWQ6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZlbnQgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgZXhwYW5kZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFJlYWRvbmx5PElQcm9wcz4sIHByZXZTdGF0ZTogUmVhZG9ubHk8SVN0YXRlPiwgc25hcHNob3Q/OiBhbnkpOiB2b2lkIHtcblxuICAgICAgICBpZiAocHJldlN0YXRlLmV4cGFuZGVkICE9PSB0aGlzLnN0YXRlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICBCbGFja291dC50b2dnbGUodGhpcy5zdGF0ZS5leHBhbmRlZCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSB7XG5cbiAgICAgICAgY29uc3QgZGlzcGxheSA9IHRoaXMuc3RhdGUuZXhwYW5kZWQgPyAnYmxvY2snIDogJ25vbmUnO1xuXG4gICAgICAgIGNvbnN0IHNpZGViYXJTdHlsZSA9IE9iamVjdC5hc3NpZ24oe30sIFN0eWxlcy5zaWRlYmFyLCB7ZGlzcGxheX0pO1xuXG4gICAgICAgIGNvbnN0IE5hdkJ1dHRvbnMgPSAoKSA9PiAoXG5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tkaXNwbGF5OiAnZmxleCd9fT5cblxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJ0b2dnbGUtc2lkZWJhclwiXG4gICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtci0xXCJcbiAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7bWFyZ2luVG9wOiAnYXV0bycsIG1hcmdpbkJvdHRvbTogJ2F1dG8nfX0+XG4gICAgICAgICAgICAgICAgICAgIDxCdXR0b24gY29sb3I9J2xpZ2h0J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMudG9nZ2xlKCl9PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPVwiZmFzIGZhLWJhcnNcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPFNpbXBsZVRvb2x0aXAgdGFyZ2V0PVwidG9nZ2xlLXNpZGViYXJcIj5Ub2dnbGUgc2hvd2luZyB0aGUgc2lkZWJhcjwvU2ltcGxlVG9vbHRpcD5cblxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3ttYXJnaW5Ub3A6ICdhdXRvJywgbWFyZ2luQm90dG9tOiAnYXV0byd9fT5cbiAgICAgICAgICAgICAgICAgICAgPE5hdkxvZ28vPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gKFxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlcG8tc2lkZWJhclwiPlxuXG4gICAgICAgICAgICAgICAgPEdEUFJOb3RpY2UvPlxuXG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPE5hdkJ1dHRvbnMvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgey8qUmV3b3JrIHRoaXMgc28gdGhhdCBJIGNhbiBhY2NlcHQgdGhlIEVTQyBrZXkgYmluZGluZyBoZXJlLiovfVxuICAgICAgICAgICAgICAgIHsvKmh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3NDQwNDA4L2hvdy10by1kZXRlY3QtZXNjLWtleS1wcmVzcy1pbi1yZWFjdC1hbmQtaG93LXRvLWhhbmRsZS1pdC80NjEyMzk2MiovfVxuXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwic2lkZWJhclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3NpZGViYXJTdHlsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWV4cGFuZGVkPXt0aGlzLnN0YXRlLmV4cGFuZGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgIG9uS2V5VXA9e2V2ZW50ID0+IHRoaXMub25LZXlVcChldmVudCl9PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3ViaGVhZGVyIHAtMVwiIHN0eWxlPXtTdHlsZXMuc3ViaGVhZGVyfT5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPE5hdkJ1dHRvbnMvPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxMaXN0R3JvdXAgZmx1c2g+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXBvU2lkZWJhckl0ZW0gaWQ9XCJzaWRlYmFyLWl0ZW0tZG9jdW1lbnRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB0aGlzLnRvZ2dsZSgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwiZmFzIGZhLWFyY2hpdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PVwiRG9jdW1lbnRzXCIvPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8UmVwb1NpZGViYXJJdGVtIGlkPVwic2lkZWJhci1pdGVtLWFubm90YXRpb25zXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHJlZj1cIiNhbm5vdGF0aW9uc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMudG9nZ2xlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJmYXMgZmEtbGF5ZXItZ3JvdXBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PVwiQW5ub3RhdGlvbnNcIi8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvKjxSZXBvU2lkZWJhckl0ZW0gaHJlZj1cIiNlZGl0b3JzLXBpY2tzXCIqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qb25DbGljaz17KCkgPT4gdGhpcy50b2dnbGUoKX0qL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qaWNvbkNsYXNzTmFtZT1cImZhcyBmYS1zdGFyXCIqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey8qdGV4dD1cIkVkaXRvcnMgUGlja3NcIi8+Ki99XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXBvU2lkZWJhckl0ZW0gaWQ9XCJzaWRlYmFyLWl0ZW0tc3RhdHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI3N0YXRzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdGhpcy50b2dnbGUoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzTmFtZT1cImZhcyBmYS1jaGFydC1saW5lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD1cIlN0YXRpc3RpY3NcIi8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXBvU2lkZWJhckl0ZW0gaWQ9XCJzaWRlYmFyLWl0ZW0tbG9nc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhyZWY9XCIjbG9nc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMudG9nZ2xlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJmYXMgZmEtaW5mby1jaXJjbGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PVwiTG9nc1wiLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG9TaWRlYmFySXRlbSBpZD1cInNpZGViYXItaXRlbS1jb21tdW5pdHlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI2NvbW11bml0eVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMudG9nZ2xlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJmYXMgZmEtaGFuZHMtaGVscGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9XCJDb21tdW5pdHlcIi8+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxSZXBvU2lkZWJhckl0ZW0gaWQ9XCJzaWRlYmFyLWl0ZW0td2hhdHNuZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPVwiI3doYXRzLW5ld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHRoaXMudG9nZ2xlKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJmYXMgZmEtYnVsbGhvcm5cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0PVwiV2hhdHMgTmV3XCIvPlxuXG4gICAgICAgICAgICAgICAgICAgIDwvTGlzdEdyb3VwPlxuXG4gICAgICAgICAgICAgICAgICAgIDxTaW1wbGVUb29sdGlwIHRhcmdldD1cInNpZGViYXItaXRlbS1kb2N1bWVudHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBNYW5hZ2UgYWxsIGRvY3VtZW50cyB5b3UncmUgcmVhZGluZyBpbmNsdWRpbmcgZmlsdGVyaW5nIGFuZCBzb3J0aW5nLlxuXG4gICAgICAgICAgICAgICAgICAgIDwvU2ltcGxlVG9vbHRpcD5cblxuICAgICAgICAgICAgICAgICAgICA8U2ltcGxlVG9vbHRpcCB0YXJnZXQ9XCJzaWRlYmFyLWl0ZW0tYW5ub3RhdGlvbnNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBNYW5hZ2UgYWxsIGFubm90YXRpb25zIG9mIGFsbCB5b3VyIGRvY3VtZW50cyBpbiBvbmUgY2VudHJhbCB2aWV3LlxuXG4gICAgICAgICAgICAgICAgICAgIDwvU2ltcGxlVG9vbHRpcD5cblxuICAgICAgICAgICAgICAgICAgICA8U2ltcGxlVG9vbHRpcCB0YXJnZXQ9XCJzaWRlYmFyLWl0ZW0tc3RhdHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBTaG93IHN0YXRzIG9uIHlvdXIgdXNhZ2Ugb2YgUG9sYXIgaW5jbHVkaW5nIHN0YXRzIG9uIHRhZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRlIG9mIGRvY3VtZW50IGFkZGl0aW9uLCBldGMuXG5cbiAgICAgICAgICAgICAgICAgICAgPC9TaW1wbGVUb29sdGlwPlxuXG4gICAgICAgICAgICAgICAgICAgIDxTaW1wbGVUb29sdGlwIHRhcmdldD1cInNpZGViYXItaXRlbS1sb2dzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdz17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgU2hvdyBsb2dzIG9uIGludGVybmFsIGFjdGl2aXR5IGR1cmluZyBiYWNrZ3JvdW5kIG9wZXJhdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpa2UgY2xvdWQgYWN0aXZpdHkgYW5kIHN5bmMuXG5cbiAgICAgICAgICAgICAgICAgICAgPC9TaW1wbGVUb29sdGlwPlxuXG4gICAgICAgICAgICAgICAgICAgIDxTaW1wbGVUb29sdGlwIHRhcmdldD1cInNpZGViYXItaXRlbS1jb21tdW5pdHlcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93PXswfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZW1lbnQ9XCJyaWdodFwiPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBGaW5kIGNvbW11bml0eSByZXNvdXJjZXMgaW5jbHVkaW5nIGxpbmtzIHRvIGRpc2N1c3Npb25zIGFyb3VuZCBQb2xhci5cblxuICAgICAgICAgICAgICAgICAgICA8L1NpbXBsZVRvb2x0aXA+XG5cbiAgICAgICAgICAgICAgICAgICAgPFNpbXBsZVRvb2x0aXAgdGFyZ2V0PVwic2lkZWJhci1pdGVtLXdoYXRzbmV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvdz17MH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VtZW50PVwicmlnaHRcIj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgRmluZCBvdXQgd2hhdCdzIG5ldyB3aXRoIGVhY2ggUG9sYXIgcmVsZWFzZS5cblxuICAgICAgICAgICAgICAgICAgICA8L1NpbXBsZVRvb2x0aXA+XG5cbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbktleVVwKGV2ZW50OiBSZWFjdC5LZXlib2FyZEV2ZW50PEhUTUxFbGVtZW50Pikge1xuXG4gICAgICAgIC8vIG5vb3BcblxuICAgIH1cblxuICAgIHByaXZhdGUgdG9nZ2xlKCkge1xuXG4gICAgICAgIGNvbnN0IGV4cGFuZGVkID0gISB0aGlzLnN0YXRlLmV4cGFuZGVkO1xuXG4gICAgICAgIEJsYWNrb3V0LnRvZ2dsZShleHBhbmRlZCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBleHBhbmRlZFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBcHBBY3Rpdml0aWVzLmdldCgpLmRpc3BhdGNoRXZlbnQoe25hbWU6ICdzaWRlYmFyLXRvZ2dsZWQnLCBkYXRhOlxuICAgICAgICAvLyB7ZXhwYW5kZWR9fSk7XG5cbiAgICB9XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBTaWRlYmFyU3RhdHVzIHtcbiAgICByZWFkb25seSBleHBhbmRlZDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElQcm9wcyB7XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuICAgIHJlYWRvbmx5IGV4cGFuZGVkOiBib29sZWFuO1xufVxuXG4iXX0=