"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const Throttler_1 = require("../../../web/js/datastore/Throttler");
class RepoDocMetaLoaders {
    static addThrottlingEventListener(repoDocMetaLoader, callback) {
        const throttlerOpts = { maxRequests: 100, maxTimeout: 300 };
        const refreshThrottler = new Throttler_1.Throttler(() => callback(), throttlerOpts);
        return repoDocMetaLoader.addEventListener(event => {
            refreshThrottler.exec();
        });
    }
}
exports.RepoDocMetaLoaders = RepoDocMetaLoaders;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVwb0RvY01ldGFMb2FkZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUmVwb0RvY01ldGFMb2FkZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUVBQThEO0FBSTlELE1BQWEsa0JBQWtCO0lBUXBCLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQyxpQkFBb0MsRUFDcEMsUUFBb0I7UUF3QnpELE1BQU0sYUFBYSxHQUFHLEVBQUUsV0FBVyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFFNUQsTUFBTSxnQkFBZ0IsR0FBRyxJQUFJLHFCQUFTLENBQUMsR0FBRyxFQUFFLENBQUMsUUFBUSxFQUFFLEVBQUUsYUFBYSxDQUFDLENBQUM7UUFFeEUsT0FBTyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUU5QyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUU1QixDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7Q0FFSjtBQTdDRCxnREE2Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1Rocm90dGxlcn0gZnJvbSAnLi4vLi4vLi4vd2ViL2pzL2RhdGFzdG9yZS9UaHJvdHRsZXInO1xuaW1wb3J0IHtSZXBvRG9jTWV0YUxvYWRlcn0gZnJvbSAnLi9SZXBvRG9jTWV0YUxvYWRlcic7XG5pbXBvcnQge1JlbGVhc2VhYmxlfSBmcm9tICcuLi8uLi8uLi93ZWIvanMvcmVhY3Rvci9FdmVudExpc3RlbmVyJztcblxuZXhwb3J0IGNsYXNzIFJlcG9Eb2NNZXRhTG9hZGVycyB7XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gRXZlbnRMaXN0ZW5lciB0byB0aGUgUmVwb0RvY01ldGFMb2FkZXIgdGhhdCdzIHRocm90dGxlZFxuICAgICAqXG4gICAgICogQHBhcmFtIHJlcG9Eb2NNZXRhTG9hZGVyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBhZGRUaHJvdHRsaW5nRXZlbnRMaXN0ZW5lcihyZXBvRG9jTWV0YUxvYWRlcjogUmVwb0RvY01ldGFMb2FkZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdm9pZCk6IFJlbGVhc2VhYmxlIHtcblxuICAgICAgICAvLyBETyBOT1QgcmVmcmVzaCB0b28gb2Z0ZW4gaWYgd2UgZ2V0IGxvdHMgb2YgZG9jdW1lbnRzIGFzIHRoaXMgcmVhbGx5XG4gICAgICAgIC8vIGxvY2tzIHVwIHRoZSBVSSBidXQgd2UgYWxzbyBuZWVkIGEgcmVhc29uYWJsZSB0aW1lb3V0LlxuICAgICAgICAvL1xuICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIGEgdG91Z2ggZGVjaXNpb24gYXMgaXQgdHJhZGVzIHRocm91Z2hwdXQgZm9yIGxhdGVuY3lcbiAgICAgICAgLy8gYW5kIEkgZG9uJ3Qgd2FudCBsYXRlbmN5IGluIHRoZSBVSS4gIEl0IG1pZ2h0IGJlIGJldHRlciB0byBiYXRjaCBpbnRvXG4gICAgICAgIC8vIDUwIGl0ZW1zIGVhY2ggd2hlbiBTRU5ESU5HIHRoZSBldmVudHMgYW5kIG5vdCB0aHJvdHRsaW5nIHRoZSBldmVudHNcbiAgICAgICAgLy8gYnV0IHRocm90dGxpbmcgdGhlIGFjdHVhbCBzbmFwc2hvdCByYXRlLiAgRm9yIGV4YW1wbGUsIGlmIHdlIHJlY2VpdmVcbiAgICAgICAgLy8gYSBzbmFwc2hvdCB3aXRoIDUwMCBpdGVtcyB3ZSBjYW4ganVzdCBicmVhayB0aGF0IGludG8gc2F5IDUwIGl0ZW1zXG4gICAgICAgIC8vIGVhY2ggYW5kIHRoZW4gaW1tZWRpYXRlbHkgdXBkYXRlIHRoZSBVSSB3aXRoIG5vIHRyYWlsaW5nIGxhdGVuY3kgYXRcbiAgICAgICAgLy8gdGhlIGVuZC4gIEJ1dCB3ZSBjYW4gdGhyb3R0bGUgdGhlIGFjdHVhbCBudW1iZXIgb2Ygc25hcHNob3RzIHNvIHRoYXRcbiAgICAgICAgLy8gaWYgd2UgcmVjZWl2ZSB0b25zIG9mIHNuYXBzaG90cyB3aXRoIDEgaXRlbSB0aGVtIHdlIGJhdGNoIHRoZXNlIGJ1dFxuICAgICAgICAvLyBldmVuIFRIRU4gdGhhdCB3b3VsZCBhZGQgbGF0ZW5jeSBiZWNhdXNlIHdlJ3JlIG5vdCBzdXJlIGhvdyBvZnRlblxuICAgICAgICAvLyB0aGUgc2VydmVyIGlzIHNlbmRpbmcgZGF0YS5cblxuICAgICAgICAvLyBUT0RPOiBjb25zaWRlciBBTFdBWVMgc2VuZGluZyB0aGUgbGFzdCBldmVudCBhcyBzb29uIGFzIHdlIGdldCBpdFxuICAgICAgICAvLyBhbmQgY2xlYXIgdGhlIHRocm90dGxlci4gIFRoaXMgd2F5IGlmIHdlIHJlY2VpdmUgdGhlIDEwMCUgZXZlbnQgd2VcbiAgICAgICAgLy8gZG9uJ3QgaGF2ZSBhbnkgbGF0ZW5jeS4gIFdlJ3JlIGdvaWduIHRvIG5lZWQgYSBjbGVhcigpIG9yIGZsdXNoKClcbiAgICAgICAgLy8gbWV0aG9kIGluIHRoZSB0aHJvdHRsZXIuIG1heWJlIGp1c3QgYSBmb3JjZSBhcmcgdG8gZXhlYygpIHRvIGZvcmNlXG4gICAgICAgIC8vIHRoaXMgbWV0aG9kIGZyb20gYmVpbmcgY2FsbGVkLiAgV2UgbWlnaHQgd2FudCB0byBoYXZlIGEgbWluVGltZW91dFxuICAgICAgICAvLyBoZXJlIHRvbyBzbyB0aGF0IHRoaXMgZmx1c2ggYmVoYXZpb3IgY291bGRuJ3QgYmUgdHJpZ2dlcmVkIHRvbyBvZnRlblxuICAgICAgICAvLyBidXQgbWF5YmUgd2UncmUgb3ZlcnRoaW5raW5nIGhlcmUgKGZvciBub3cpLlxuXG4gICAgICAgIGNvbnN0IHRocm90dGxlck9wdHMgPSB7IG1heFJlcXVlc3RzOiAxMDAsIG1heFRpbWVvdXQ6IDMwMCB9O1xuXG4gICAgICAgIGNvbnN0IHJlZnJlc2hUaHJvdHRsZXIgPSBuZXcgVGhyb3R0bGVyKCgpID0+IGNhbGxiYWNrKCksIHRocm90dGxlck9wdHMpO1xuXG4gICAgICAgIHJldHVybiByZXBvRG9jTWV0YUxvYWRlci5hZGRFdmVudExpc3RlbmVyKGV2ZW50ID0+IHtcblxuICAgICAgICAgICAgcmVmcmVzaFRocm90dGxlci5leGVjKCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn1cbiJdfQ==